(function(e){function s(s){for(var a,n,o=s[0],l=s[1],c=s[2],u=0,m=[];u<o.length;u++)n=o[u],r[n]&&m.push(r[n][0]),r[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(s);while(m.length)m.shift()();return i.push.apply(i,c||[]),t()}function t(){for(var e,s=0;s<i.length;s++){for(var t=i[s],a=!0,o=1;o<t.length;o++){var l=t[o];0!==r[l]&&(a=!1)}a&&(i.splice(s--,1),e=n(n.s=t[0]))}return e}var a={},r={index:0},i=[];function n(s){if(a[s])return a[s].exports;var t=a[s]={i:s,l:!1,exports:{}};return e[s].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=e,n.c=a,n.d=function(e,s,t){n.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:t})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,s){if(1&s&&(e=n(e)),8&s)return e;if(4&s&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&s&&"string"!=typeof e)for(var a in e)n.d(t,a,function(s){return e[s]}.bind(null,a));return t},n.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(s,"a",s),s},n.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},n.p="/assets/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=s,o=o.slice();for(var c=0;c<o.length;c++)s(o[c]);var d=l;i.push([0,"chunk-vendors"]),t()})({0:function(e,s,t){e.exports=t("56d7")},4678:function(e,s,t){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var s=i(e);return t(s)}function i(e){var s=a[e];if(!(s+1)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id="4678"},"56d7":function(e,s,t){"use strict";t.r(s);t("cadf"),t("551c"),t("f751"),t("097d");var a=t("2b0e"),r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"header"}},[t("HeaderApp"),t("AppNotify")],1),t("transition",[t("keep-alive",[t("router-view")],1)],1)],1)},i=[],n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"header-container container-fluid"},[t("div",{staticClass:"row"},[e._m(0),t("div",{staticClass:"col user-panel"},[e.userConnected?e._e():t("button",{staticClass:"button red",on:{click:function(s){return e.toggleConnectionModal()}}},[e._v("Se connecter/S'inscrire")]),e.userConnected?t("div",{staticClass:"user-menu"},[t("button",{staticClass:"toggle-user-menu",class:[e.showUserMenu?"opened":"closed"],on:{click:e.toggleUserMenu}},[t("span",{staticClass:"label"},[e._v(e._s(e.userInfos.email))]),t("span",{staticClass:"icon"})]),t("div",{staticClass:"user-submenu",class:[e.showUserMenu?"visible":"hidden"]},[e._m(1),e._m(2)])]):e._e()])])])},o=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"col logo-container"},[t("a",{attrs:{href:"/"}},[t("img",{attrs:{id:"wakemeup-logo",src:"/assets/img/wakemeup-logo.svg",alt:"Wake Me Up"}})]),t("img",{attrs:{id:"linagora-labs-logo",src:"/assets/img/linagora-labs.png",alt:"Linagora Labs"}})])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("a",{staticClass:"user-submenu-link",attrs:{href:"/interface/account"}},[t("span",{staticClass:"icon user"}),t("span",{staticClass:"label user"},[e._v("Mon compte")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("a",{staticClass:"user-submenu-link logout",attrs:{href:"/logout"}},[t("span",{staticClass:"icon logout"}),t("span",{staticClass:"label logout"},[e._v("Déconnexion")])])}],l=(t("28a5"),t("bc3a")),c=t.n(l),d={data:function(){return{userConnected:!1,showUserMenu:!1}},created:function(){var e=this,s=this.getCookie("wmu_user");"disconnected"!==s&&this.$store.dispatch("getUserInfos",s).then(function(s){s&&(e.userConnected=!0)},function(e){console.error("error:",err)})},computed:{userInfos:function(){return this.$store.state.userInfos}},methods:{toggleConnectionModal:function(){me.$emit("toggle_connection_modal",{})},toggleUserMenu:function(){this.showUserMenu=!this.showUserMenu},getCookie:function(e){for(var s=e+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){var r=t[a];while(" "==r.charAt(0))r=r.substring(1);if(0==r.indexOf(s))return r.substring(s.length,r.length)}return""}}},u=d,m=t("2877"),f=Object(m["a"])(u,n,o,!1,null,null,null),h=f.exports,p=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{style:e.notifHeight,attrs:{id:"notifyApp"}},[t("div",{class:e.status,attrs:{id:"notif-container"}},[t("span",{staticClass:"notif-line"}),t("span",{staticClass:"icon"}),t("span",{staticClass:"label"},[e._v(e._s(e.msg))])])])},v=[],g=(t("96cf"),t("3b8d")),w={data:function(){return{msg:"",status:"",redirect:"",notifHeight:"height: 0px;"}},mounted:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:me.$on("notify_app",function(e){s.msg=e.msg,s.status=e.status,s.redirect=e.redirect,s.redirect&&(s.msg+=" You will be redirected in 3sec..."),setTimeout(function(){var e=document.getElementById("notif-container").offsetHeight;s.notifHeight="height: "+(e+10)+"px"},200),setTimeout(function(){s.notifHeight="height: 0px;",s.redirect&&(document.location.href=s.redirect)},4e3)});case 1:case"end":return e.stop()}},e)}));function s(){return e.apply(this,arguments)}return s}()},b=w,C=Object(m["a"])(b,p,v,!1,null,null,null),_=C.exports,E={data:function(){return{}},components:{HeaderApp:h,AppNotify:_}},j=E,P=Object(m["a"])(j,r,i,!1,null,null,null),y=P.exports,M=t("8c4f"),k=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[e._m(0),t("ConnectionModal"),t("CreateAccountModal")],1)},V=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"page-content"}},[t("div",{attrs:{id:"home"}},[t("div",{staticClass:"container-fluid",attrs:{id:"highlight"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col talk"},[t("h2",[e._v("Enregistrez votre voix")]),t("div",{staticClass:"title-icon"},[t("img",{attrs:{src:"/assets/img/talk.svg",alt:"Parler"}})]),t("div",{staticClass:"highlight-content"},[e._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam euismod malesuada nisl, sit amet vulputate justo interdum nec. Donec lobortis, ipsum vitae hendrerit sodales, purus risus fringilla ante, eu auctor mi velit ut turpis.")]),t("div",{staticClass:"highlight-action"},[t("a",{staticClass:"button red",attrs:{href:"/interface/record"}},[e._v("Enregistrez votre voix")])])]),t("div",{staticClass:"col listen"},[t("h2",[e._v("Écoutez et participez à la validation")]),t("div",{staticClass:"title-icon"},[t("img",{attrs:{src:"/assets/img/listen.svg",alt:"Ecouter"}})]),t("div",{staticClass:"highlight-content"},[e._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam euismod malesuada nisl, sit amet vulputate justo interdum nec. Donec lobortis, ipsum vitae hendrerit sodales, purus risus fringilla ante, eu auctor mi velit ut turpis.")]),t("div",{staticClass:"highlight-action"},[t("button",{staticClass:"button green"},[e._v("Écouter des enregistrements")])])])])]),t("div",{staticClass:"divider red shadowTop"})])])}],x=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"modal",class:[e.showConnectionModal?"visible":"hidden"]},[t("div",{staticClass:"modal-container"},[t("div",{staticClass:"modal-header"},[t("h3",{staticClass:"modal-title red"},[e._v("Se connecter")]),t("button",{staticClass:"close-modal",on:{click:e.closeModal}})]),t("div",{staticClass:"modal-body"},[t("span",[e._v("Veuillez renseigner vos identifiants")]),t("div",{staticClass:"field-container"},[e._m(0),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userEmail,expression:"userEmail"}],staticClass:"input",class:["error"===e.userEmailValid?"error":"","valid"===e.userEmailValid?"valid":""],attrs:{type:"text"},domProps:{value:e.userEmail},on:{input:function(s){s.target.composing||(e.userEmail=s.target.value)}}}),t("span",{staticClass:"error-field",class:[e.userEmailErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userEmailErrorMsg))])]),t("div",{staticClass:"field-container"},[e._m(1),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userPswd,expression:"userPswd"}],staticClass:"input",class:["error"===e.userPswdValid?"error":"","valid"===e.userPswdValid?"valid":""],attrs:{type:"password"},domProps:{value:e.userPswd},on:{input:function(s){s.target.composing||(e.userPswd=s.target.value)}}}),t("span",{staticClass:"error-field",class:[e.userPswdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userPswdErrorMsg))])]),t("div",{staticClass:"field-container btn"},[t("button",{staticClass:"button red large",on:{click:function(s){return e.sendLogin()}}},[e._v("S'identifier")])]),t("button",{staticClass:"aslink"},[e._v("Identifiants oubliés ?")]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"divider red"}),t("div",{staticClass:"spacer"}),t("span",[e._v("Vous n'avez pas d'identifiants ?")]),t("div",{staticClass:"field-container btn"},[t("button",{staticClass:"button green large",on:{click:e.toggleCreateAccountModal}},[e._v("Créer un compte")])])])])])])},R=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"field-label"},[t("span",{staticClass:"icon user"}),t("span",{staticClass:"label"},[e._v("Adresse email:")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"field-label"},[t("span",{staticClass:"icon pswd"}),t("span",{staticClass:"label"},[e._v("Mot de passe :")])])}],I={data:function(){return{showConnectionModal:!1,userEmail:"rlopez@linagora.com",userEmailValid:!1,userEmailErrorMsg:"",userPswd:"admin",userPswdValid:!1,userPswdErrorMsg:""}},mounted:function(){var e=this;me.$on("toggle_connection_modal",function(){e.toggleConnectionModal()})},methods:{toggleConnectionModal:function(){this.showConnectionModal=!this.showConnectionModal},closeModal:function(){this.showConnectionModal=!1},toggleCreateAccountModal:function(){this.showConnectionModal=!1,me.$emit("toggle_create_account_modal",{})},validateEmail:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},checkForm:function(){return 0===this.userEmail.length?(this.userEmailValid="error",this.userEmailErrorMsg="Vous devez renseigner une adresse email de connection"):this.validateEmail(this.userEmail)?(this.userEmailValid="valid",this.userEmailErrorMsg=""):(this.userEmailValid="error",this.userEmailErrorMsg="Le format de l'adresse email est invalide"),0===this.userPswd.length?(this.userPswdValid="error",this.userPswdErrorMsg="Veuillez renseigner un mot de passe"):(this.userPswdValid="valid",this.userPswdErrorMsg=""),"valid"===this.userEmailValid&&"valid"===this.userPswdValid},sendLogin:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var s,t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.checkForm(),!s){e.next=7;break}return t={email:this.userEmail,password:this.userPswd},e.next=5,c()("http://localhost:3003/login/userAuth",{method:"post",data:t});case 5:a=e.sent,"error"===a.data.status?"user"===a.data.field?(this.userEmailValid="error",this.userEmailErrorMsg=a.data.msg):"password"===a.data.field&&(this.userPswdValid="error",this.userPswdErrorMsg=a.data.msg):"success"===a.data.status&&(document.location.href="/");case 7:case"end":return e.stop()}},e,this)}));function s(){return e.apply(this,arguments)}return s}()}},N=I,S=Object(m["a"])(N,x,R,!1,null,null,null),A=S.exports,O=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"modal",class:[e.showCreateAccountModal?"visible":"hidden"]},[t("div",{staticClass:"modal-container"},[t("div",{staticClass:"modal-header"},[t("h3",{staticClass:"modal-title green"},[e._v("Créer un compte")]),t("button",{staticClass:"close-modal",on:{click:function(s){return e.closeModal()}}}),t("button",{staticClass:"back-login-modal",on:{click:function(s){return e.backToLogin()}}})]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"field-container"},[e._m(0),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userEmail,expression:"userEmail"}],staticClass:"input",class:["error"===e.userEmailValid?"error":"","valid"===e.userEmailValid?"valid":""],attrs:{type:"text"},domProps:{value:e.userEmail},on:{input:function(s){s.target.composing||(e.userEmail=s.target.value)}}}),t("span",{staticClass:"error-field",class:[e.userEmailErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userEmailErrorMsg))])]),t("div",{staticClass:"field-container"},[e._m(1),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userPswd,expression:"userPswd"}],staticClass:"input",class:["error"===e.userPswdValid?"error":"","valid"===e.userPswdValid?"valid":""],attrs:{type:"password"},domProps:{value:e.userPswd},on:{input:function(s){s.target.composing||(e.userPswd=s.target.value)}}}),t("span",{staticClass:"error-field",class:[e.userPswdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userPswdErrorMsg))])]),t("div",{staticClass:"field-container"},[e._m(2),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userPswdConfirm,expression:"userPswdConfirm"}],staticClass:"input",class:["error"===e.userPswdConfirmValid?"error":"","valid"===e.userPswdConfirmValid?"valid":""],attrs:{type:"password"},domProps:{value:e.userPswdConfirm},on:{input:function(s){s.target.composing||(e.userPswdConfirm=s.target.value)}}}),t("span",{staticClass:"error-field",class:[e.userPswdConfirmdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userPswdConfirmdErrorMsg))])]),t("div",{staticClass:"field-container"},[t("div",{staticClass:"field-label"},[t("span",{staticClass:"required"},[e._v("*")]),t("span",{staticClass:"label"},[e._v("Sexe :")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.userGender,expression:"userGender"}],staticClass:"select",class:["error"===e.userGenderValid?"error":"","valid"===e.userGenderValid?"valid":""],on:{change:function(s){var t=Array.prototype.filter.call(s.target.options,function(e){return e.selected}).map(function(e){var s="_value"in e?e._value:e.value;return s});e.userGender=s.target.multiple?t:t[0]}}},[t("option",{attrs:{value:"",hidden:""}},[e._v("Sélectionner un sexe")]),t("option",{attrs:{value:"male"}},[e._v("Homme")]),t("option",{attrs:{value:"female"}},[e._v("Femme")])])]),t("span",{staticClass:"error-field",class:[e.userGenderErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userGenderErrorMsg))])]),t("div",{staticClass:"field-container"},[e._m(3),t("div",{staticClass:"micro-type-container"},[t("div",{staticClass:"micro-type-item",class:["default"==e.deviceType?"active":""],on:{click:function(s){return e.setMicrophone("default")}}},[t("span",{staticClass:"icon default"}),t("span",{staticClass:"label"},[e._v("Micro par défaut")])]),t("div",{staticClass:"micro-type-item",class:["casque"==e.deviceType?"active":""],on:{click:function(s){return e.setMicrophone("casque")}}},[t("span",{staticClass:"icon casque"}),t("span",{staticClass:"label"},[e._v("Micro-casque")])]),t("div",{staticClass:"micro-type-item",class:["pied"==e.deviceType?"active":""],on:{click:function(s){return e.setMicrophone("pied")}}},[t("span",{staticClass:"icon pied"}),t("span",{staticClass:"label"},[e._v("Micro à pied")])])])]),t("div",{staticClass:"field-container btn"},[t("button",{staticClass:"button green large",on:{click:function(s){return e.sendForm()}}},[e._v(e._s(e.btnCreateAccountLabel))]),t("span",{staticClass:"status-field",class:[e.createAccountStatus.length>0?"visible "+e.createAccountStatus:"hidden"]},[e._v(e._s(e.createAccoutMsg))])])])])])])},z=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"field-label"},[t("span",{staticClass:"required"},[e._v("*")]),t("span",{staticClass:"label"},[e._v("Adresse email:")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"field-label"},[t("span",{staticClass:"required"},[e._v("*")]),t("span",{staticClass:"label"},[e._v("Mot de passe :")]),t("button",{staticClass:"info-label"})])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"field-label"},[t("span",{staticClass:"required"},[e._v("*")]),t("span",{staticClass:"label"},[e._v("Confirmation du mot de passe :")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"field-label"},[t("span",{staticClass:"required"},[e._v("*")]),t("span",{staticClass:"label"},[e._v("Type de mircophone :")])])}],$={data:function(){return{showCreateAccountModal:!1,deviceType:"default",userEmail:"",userEmailValid:!1,userEmailErrorMsg:"",userPswd:"",userPswdValid:!1,userPswdErrorMsg:"",userPswdConfirm:"",userPswdConfirmValid:!1,userPswdConfirmdErrorMsg:"",userGender:"",userGenderValid:!1,userGenderErrorMsg:"",btnCreateAccountLabel:"Créer un compte",createAccountStatus:"",createAccoutMsg:""}},mounted:function(){var e=this;me.$on("toggle_create_account_modal",function(){e.showCreateAccountModal=!0})},methods:{setMicrophone:function(e){this.deviceType=e},closeModal:function(){this.showCreateAccountModal=!1},backToLogin:function(){this.showCreateAccountModal=!1,me.$emit("toggle_connection_modal",function(){})},validateEmail:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},sendForm:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var s,t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.checkForm(),!s){e.next=12;break}return this.btnCreateAccountLabel="Création en cours...",t={email:this.userEmail,pswd:this.userPswd,gender:this.userGender,deviceType:this.deviceType},e.next=6,c()("http://localhost:3003/login/createUser",{method:"post",data:t});case 6:a=e.sent,this.createAccountStatus=a.data.status,this.createAccoutMsg=a.data.msg,"success"===a.data.status?(this.btnCreateAccountLabel="Succès",this.createAccoutMsg+=", vous allez être redirigé dans 3 sec",this.setCookie("wmu_user",a.data.userHash),setTimeout(function(){document.location.href="/"},3e3)):this.btnCreateAccountLabel="Créer un compte",e.next=13;break;case 12:return e.abrupt("return");case 13:case"end":return e.stop()}},e,this)}));function s(){return e.apply(this,arguments)}return s}(),checkForm:function(){return 0===this.userEmail.length?(this.userEmailValid="error",this.userEmailErrorMsg="Veuillez renseigner une adresse email"):this.validateEmail(this.userEmail)?(this.userEmailValid="valid",this.userEmailErrorMsg=""):(this.userEmailValid="error",this.userEmailErrorMsg="Le format de l'adresse email est invalide"),0===this.userPswd.length?(this.userPswdValid="error",this.userPswdErrorMsg="Veuillez renseigner un mot de passe"):this.userPswd.length<8?(this.userPswdValid="error",this.userPswdErrorMsg="Le mot de passe doit contenir au moins 8 caractères"):(this.userPswdValid="valid",this.userPswdErrorMsg=""),0===this.userPswdConfirm.length?this.userPswdConfirmValid="error":this.userPswdConfirm!==this.userPswd?(this.userPswdConfirmValid="error",this.userPswdConfirmdErrorMsg="Les mots de passes doivent êtres identiques"):(this.userPswdConfirmValid="valid",this.userPswdConfirmdErrorMsg=""),""===this.userGender?(this.userGenderValid="error",this.userGenderErrorMsg="Veuillez sélectionner un sexe"):(this.userGenderValid="valid",this.userGenderErrorMsg=""),"valid"===this.userEmailValid&&"valid"===this.userPswdValid&&"valid"===this.userPswdConfirmValid&&"valid"===this.userGenderValid},setCookie:function(e,s,t){var a=new Date;a.setTime(a.getTime()+24*t*60*60);var r="expires="+a.toUTCString();document.cookie=e+"="+s+";"+r+";path=/"},getCookie:function(e){for(var s=e+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){var r=t[a];while(" "==r.charAt(0))r=r.substring(1);if(0==r.indexOf(s))return r.substring(s.length,r.length)}return""}}},L=$,U=Object(m["a"])(L,O,z,!1,null,null,null),T=U.exports,q={data:function(){return{showConnectModal:!1}},components:{Header:h,ConnectionModal:A,CreateAccountModal:T}},D=q,F=Object(m["a"])(D,k,V,!1,null,null,null),B=F.exports,G=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"page-content"}},[t("div",{staticClass:"container-fluid h-100 talk",attrs:{id:"player-container"}},[t("div",{staticClass:"row h-100"},[e._m(0),t("div",{staticClass:"col-9 h-100"},[e.dataReady&&!e.allComplete?t("div",{attrs:{id:"player-wrapper"}},[t("div",{staticClass:"say-word"},[t("h3",[e._v('Dites : "'),t("span",{staticClass:"word"},[e._v(e._s(e.wakeword))]),e._v('"')])]),t("div",{staticClass:"record-btn-container"},[t("div",{staticClass:"player-anim"},[t("span",{staticClass:"sound-bar bsmall",class:[e.isRecording?"animate":""]}),t("span",{staticClass:"sound-bar bmed",class:[e.isRecording?"animate":""]}),t("span",{staticClass:"sound-bar bbig",class:[e.isRecording?"animate":""]})]),e.isRecording?e._e():t("button",{staticClass:"button-record",attrs:{id:"start"},on:{click:function(s){return e.startRecording()}}},[t("span",{staticClass:"icon"})]),e.isRecording?t("button",{staticClass:"button-record isRecording",attrs:{id:"stop"},on:{click:function(s){return e.stopRecording()}}},[t("span",{staticClass:"icon isRecording"})]):e._e(),t("div",{staticClass:"player-anim"},[t("span",{staticClass:"sound-bar bbig",class:[e.isRecording?"animate":""]}),t("span",{staticClass:"sound-bar bmed",class:[e.isRecording?"animate":""]}),t("span",{staticClass:"sound-bar bsmall",class:[e.isRecording?"animate":""]})]),t("span",{staticClass:"label"},[e._v("Enregistrer")])]),null===e.blob||e.isRecording?e._e():t("div",{staticClass:"record-actions-container"},[t("div",{staticClass:"action-container"},[t("button",{staticClass:"btn-player play",on:{click:function(s){return e.playRecord()}}}),t("span",{staticClass:"label"},[e._v("Réécouter")])]),t("div",{staticClass:"action-container"},[t("button",{staticClass:"btn-player reset",on:{click:function(s){return e.startRecording()}}}),t("span",{staticClass:"label"},[e._v("Recommencer")])]),t("div",{staticClass:"action-container"},[t("button",{staticClass:"btn-player validate",on:{click:function(s){return e.validRecord()}}}),t("span",{staticClass:"label"},[e._v("Valider")])])])]):e._e(),e.dataReady&&!e.allComplete?t("div",{staticClass:"player-timeline"},[t("div",{staticClass:"timeline"},[t("div",{staticClass:"progress",class:e.progressClass},[t("span",{staticClass:"progress-info"},[e._v(e._s(e.step)+"/3")])])])]):e._e(),!e.dataReady&&e.allComplete?t("div",[e._v("\n            Vous avez déja enregistré tous les scnérios\n        ")]):e._e(),e.dataReady||e.allComplete?e._e():t("div",{staticClass:"loading"},[t("img",{staticClass:"loading-img",attrs:{src:"/assets/img/loading.gif"}}),t("span",{staticClass:"label"},[e._v("Chargement...")])])])])])])},H=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"col-3 h-100 player-content"},[t("h2",{staticClass:"red"},[e._v("Enregistrez votre voix")]),t("span",{staticClass:"content"},[e._v("\n          Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.\n        ")])])}],Y=t("f499"),W=t.n(Y),J=(t("63d9"),t("e814")),Z=t.n(J),K=t("c1df"),Q=t.n(K),X={data:function(){return{isRecording:!1,analyser:null,blob:null,buffer:null,bufferSize:4096,context:null,leftchannel:[],leftBuffer:"",mediaRecorder:null,mediaRecorderblob:null,mediaRecorderChunk:[],mediaStream:null,numberOfInputChannels:2,numberOfOutputChannels:2,recorder:null,recordingLength:0,rightchannel:[],rightBufffer:"",sampleRate:44100,sourceNode:null,view:null,volume:null,webAudioInfos:{},scene:"",scenariosLoaded:!1,wakeword:"",audioConfig:null,step:0,dataReady:!1,allComplete:!1,progressClass:""}},created:function(){var e=this;this.$store.dispatch("getScenarios").then(function(s){e.scenariosLoaded=!0},function(e){console.error("error:",err)})},computed:{scenarios:function(){return this.$store.state.scenarios},userInfos:function(){return this.$store.state.userInfos}},mounted:function(){var e=this;setTimeout(function(){var s=e.setScenario();s?(e.dataReady=!0,e.allComplete=!1,setTimeout(function(){e.initRecorder(e.audioConfig)},500)):(e.allComplete=!0,e.dataReady=!1)},1500)},methods:{setScenario:function(){var e=this;return this.userInfos.recordList.length>0?this.userInfos.recordList.map(function(s){s.complete?e.scenarios.map(function(s){var t=s.wakeword,a=!1;e.userInfos.recordList.map(function(e){e.wakeword==t&&(a=!0)}),a||(e.wakeword=s.wakeword,e.step=1,e.audioConfig={label:"noOpt",echoCancellation:s.scenario.noOpt.echoCancellation,noiseSuppression:s.scenario.noOpt.noiseSuppression})}):(e.wakeword=s.wakeword,e.step=Z()(s.step)+1,e.scenarios.map(function(t){if(t.wakeword=s.wakeword)for(var a in t.scenario)t.scenario[a].step==e.step&&(e.audioConfig={label:a,echoCancellation:t.scenario[a].echoCancellation,noiseSuppression:t.scenario[a].noiseSuppression})}))}):(this.scene=this.scenarios[0],this.step=1,this.wakeword=this.scene.wakeword,this.audioConfig={label:"noOpt",echoCancellation:this.scene.scenario.noOpt.echoCancellation,noiseSuppression:this.scene.scenario.noOpt.noiseSuppression}),this.progressClass="step-"+this.step,null!==this.audioConfig&&(console.log(this.step,this.wakeword,this.audioConfig),!0)},startRecording:function(){this.leftchannel=[],this.rightchannel=[],this.isRecording=!0,this.mediaRecorder.start(),this.mediaStream.connect(this.recorder),this.recorder.connect(this.context.destination)},stopRecording:function(){this.isRecording=!1;var e=new Audio(d);this.recorder.disconnect(this.context.destination),this.mediaStream.disconnect(this.recorder),this.mediaRecorder.stop(),this.sourceNode=this.context.createMediaElementSource(e),this.sourceNode.connect(this.context.destination),this.leftBuffer=this.flattenArray(this.leftchannel,this.recordingLength),this.rightBuffer=this.flattenArray(this.rightchannel,this.recordingLength);var s=this.interleave(this.leftBuffer,this.rightBuffer);this.buffer=new ArrayBuffer(44+2*s.length),this.view=new DataView(this.buffer),this.writeUTFBytes(this.view,0,"RIFF"),this.view.setUint32(4,44+2*s.length,!0),this.writeUTFBytes(this.view,8,"WAVE"),this.writeUTFBytes(this.view,12,"fmt "),this.view.setUint32(16,16,!0),this.view.setUint16(20,1,!0),this.view.setUint16(22,2,!0),this.view.setUint32(24,this.sampleRate,!0),this.view.setUint32(28,4*this.sampleRate,!0),this.view.setUint16(32,4,!0),this.view.setUint16(34,16,!0),this.writeUTFBytes(this.view,36,"data"),this.view.setUint32(40,2*s.length,!0);for(var t=44,a=1,r=0;r<s.length;r++)this.view.setInt16(t,s[r]*(32767*a),!0),t+=2;this.blob=new Blob([this.view],{type:"audio/wav"});var i=this.analyser.context.sampleRate,n=this.analyser.channelCount,o=this.analyser.numberOfInputs,l=this.analyser.numberOfOutputs,c=this.recorder.bufferSize;this.webAudioInfos={contextSampleRate:i,bufferSize:c,nbChannels:n,nbInputs:o,nbOutputs:l};var d=window.URL.createObjectURL(this.blob);e.play()},playRecord:function(){if(null!=this.blob){var e=window.URL.createObjectURL(this.blob),s=new Audio(e);s.play()}},flattenArray:function(e,s){for(var t=new Float32Array(s),a=0,r=0;r<e.length;r++){var i=e[r];t.set(i,a),a+=i.length}return t},interleave:function(e,s){for(var t=e.length+s.length,a=new Float32Array(t),r=0,i=0;i<t;)a[i++]=e[r],a[i++]=s[r],r++;return a},writeUTFBytes:function(e,s,t){for(var a=0;a<t.length;a++)e.setUint8(s+a,t.charCodeAt(a))},sendDatas:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(s,t,a){var r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r={userHash:this.userInfos.emailHash,wakeword:this.wakeword,step:this.step},i=new FormData,i.append("webAudioInfos",W()(t)),i.append("userInfos",W()(r)),i.append(a,s,a),e.next=7,c()("http://localhost:3003/saveaudio",{method:"post",data:i});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));function s(s,t,a){return e.apply(this,arguments)}return s}(),validRecord:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var s,t,a,r,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=Q()().format("YYYYDDMmmhhmmss"),t=this.wakeword,a=this.audioConfig.label,r="".concat(t,"-").concat(a,"-").concat(s),1!==this.step){e.next=14;break}return e.next=7,this.sendDatas(this.blob,this.webAudioInfos,r+".wav");case 7:return i=e.sent,e.next=10,this.sendDatas(this.mediaRecorderblob,this.webAudioInfos,r+".webm");case 10:n=e.sent,"success"===i.data.status&&"success"===n.data.status?me.$emit("notify_app",{status:"success",msg:"Enregistrement validé",redirect:"/interface/record"}):me.$emit("notify_app",{status:"error",msg:"Erreur lors de l'enregistrement",redirect:!1}),e.next=19;break;case 14:return e.next=16,this.sendDatas(this.blob,this.webAudioInfos,r+".wav");case 16:i=e.sent,console.log(i),"success"===i.data.status?me.$emit("notify_app",{status:"success",msg:"Enregistrement validé",redirect:"/interface/record"}):me.$emit("notify_app",{status:"error",msg:"Erreur lors de l'enregistrement",redirect:!1});case 19:case"end":return e.stop()}},e,this)}));function s(){return e.apply(this,arguments)}return s}(),initRecorder:function(e){var s=this;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:{channelCount:{min:1,ideal:2},echoCancellation:e.echoCancellation,noiseSuppression:e.noiseSuppression}}).then(function(e){document.getElementById("start"),document.getElementById("stop");window.AudioContext=window.AudioContext||window.webkitAudioContext,s.context=new AudioContext,s.mediaStream=s.context.createMediaStreamSource(e),s.analyser=s.context.createAnalyser(),s.mediaRecorder=new MediaRecorder(e),s.context.createScriptProcessor?s.recorder=s.context.createScriptProcessor(s.bufferSize,s.numberOfInputChannels,s.numberOfOutputChannels):s.recorder=s.context.createJavaScriptNode(s.bufferSize,s.numberOfInputChannels,s.numberOfOutputChannels),s.mediaRecorderChunk=[],s.mediaRecorder.ondataavailable=function(e){s.mediaRecorderChunk.push(e.data),s.mediaRecorderblob=new Blob(s.mediaRecorderChunk,{type:"audio/webm; codecs=opus"})},s.recorder.onaudioprocess=function(e){s.leftchannel.push(new Float32Array(e.inputBuffer.getChannelData(0))),s.rightchannel.push(new Float32Array(e.inputBuffer.getChannelData(1))),s.recordingLength+=s.bufferSize}}).catch(function(e){console.error(e)})}}},ee=X,se=Object(m["a"])(ee,G,H,!1,null,null,null),te=se.exports,ae=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{attrs:{id:"page-content"}},[t("div",{staticClass:"container-fluid"},[t("div",{staticClass:"row justify-content-around"},[t("div",{staticClass:"col-5"},[t("h2",[e._v("Informations utilisateur")]),t("div",{staticClass:"white-container"},[t("table",{staticClass:"user-panel-tab"},[t("tbody",[t("tr",[t("td",{staticClass:"tab-label"},[e._v("Adresse email :")]),t("td",{staticClass:"tab-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userEmail,expression:"userEmail"}],staticClass:"input",class:["error"===e.userEmailValid?"error":"","valid"===e.userEmailValid?"valid":""],domProps:{value:e.userEmail},on:{input:function(s){s.target.composing||(e.userEmail=s.target.value)}}}),t("span",{staticClass:"error-field",class:[e.userEmailErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userEmailErrorMsg))])])]),t("tr",[t("td",{staticClass:"tab-label"},[e._v("Sexe :")]),t("td",{staticClass:"tab-input"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.userInfos.gender,expression:"userInfos.gender"}],staticClass:"select",on:{change:function(s){var t=Array.prototype.filter.call(s.target.options,function(e){return e.selected}).map(function(e){var s="_value"in e?e._value:e.value;return s});e.$set(e.userInfos,"gender",s.target.multiple?t:t[0])}}},[t("option",{attrs:{value:"male"}},[e._v("Homme")]),t("option",{attrs:{value:"female"}},[e._v("Femme")])])])]),t("tr",[t("td",{staticClass:"tab-label"},[e._v("Type de microphone :")]),t("td",{staticClass:"tab-input"},[t("div",{staticClass:"micro-type-container"},[t("div",{staticClass:"micro-type-item",class:["default"===e.userInfos.deviceType?"active":""],on:{click:function(s){return e.setMicrophone("default")}}},[t("span",{staticClass:"icon default"}),t("span",{staticClass:"label"},[e._v("Micro par défaut")])]),t("div",{staticClass:"micro-type-item",class:["casque"===e.userInfos.deviceType?"active":""],on:{click:function(s){return e.setMicrophone("casque")}}},[t("span",{staticClass:"icon casque"}),t("span",{staticClass:"label"},[e._v("Micro-casque")])]),t("div",{staticClass:"micro-type-item",class:["pied"===e.userInfos.deviceType?"active":""],on:{click:function(s){return e.setMicrophone("pied")}}},[t("span",{staticClass:"icon pied"}),t("span",{staticClass:"label"},[e._v("Micro à pied")])])])])])])]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"divider grey"}),t("div",{staticClass:"spacer"}),t("span",{staticClass:"info"},[e._v("Les informations suivantes sont facultatives")]),t("table",{staticClass:"user-panel-tab"},[t("tbody",[t("tr",[t("td",{staticClass:"tab-label"},[e._v("Nom :")]),t("td",{staticClass:"tab-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfos.lastName,expression:"userInfos.lastName"}],staticClass:"input",class:["error"===e.lastNameValid?"error":"","valid"===e.lastNameValid?"valid":""],domProps:{value:e.userInfos.lastName},on:{input:function(s){s.target.composing||e.$set(e.userInfos,"lastName",s.target.value)}}}),t("span",{staticClass:"error-field",class:[e.lastNameErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.lastNameErrorMsg))])])]),t("tr",[t("td",{staticClass:"tab-label"},[e._v("Prénom :")]),t("td",{staticClass:"tab-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfos.firstName,expression:"userInfos.firstName"}],staticClass:"input",class:["error"===e.firstNameValid?"error":"","valid"===e.firstNameValid?"valid":""],domProps:{value:e.userInfos.firstName},on:{input:function(s){s.target.composing||e.$set(e.userInfos,"firstName",s.target.value)}}}),t("span",{staticClass:"error-field",class:[e.firstNameErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.firstNameErrorMsg))])])]),t("tr",[t("td",{staticClass:"tab-label"},[e._v("Tranche d'âge :")]),t("td",{staticClass:"tab-input"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.userInfos.ageRange,expression:"userInfos.ageRange"}],staticClass:"select",on:{change:function(s){var t=Array.prototype.filter.call(s.target.options,function(e){return e.selected}).map(function(e){var s="_value"in e?e._value:e.value;return s});e.$set(e.userInfos,"ageRange",s.target.multiple?t:t[0])}}},[t("option",{attrs:{value:"",hidden:""}},[e._v("Sélectionner votre tranche d'âge")]),t("option",{attrs:{value:"10-20"}},[e._v("10 - 20 ans")]),t("option",{attrs:{value:"20-30"}},[e._v("20 - 30 ans")]),t("option",{attrs:{value:"30-40"}},[e._v("30 - 40 ans")]),t("option",{attrs:{value:"40-50"}},[e._v("40 - 50 ans")]),t("option",{attrs:{value:"50-60"}},[e._v("50 - 60 ans")]),t("option",{attrs:{value:"60-70"}},[e._v("60 - 70 ans")]),t("option",{attrs:{value:"70+"}},[e._v("70+ ans")])])])]),t("tr",[t("td",{staticStyle:{"padding-top":"10px"},attrs:{colspan:"2"}},[t("button",{staticClass:"button green large",on:{click:function(s){return e.updateProfil()}}},[e._v("Mettre mes informations à jour")])])])])])]),t("h2",[e._v("Modifier le mot de passe")]),t("div",{staticClass:"white-container"},[t("table",{staticClass:"user-panel-tab"},[t("tbody",[t("tr",[t("td",{staticClass:"tab-label"},[e._v("Mot de passe actuel :")]),t("td",{staticClass:"tab-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentPswd,expression:"currentPswd"}],staticClass:"input",class:["error"===e.currentPswdValid?"error":"","valid"===e.currentPswdValid?"valid":""],attrs:{type:"password"},domProps:{value:e.currentPswd},on:{input:function(s){s.target.composing||(e.currentPswd=s.target.value)}}}),t("span",{staticClass:"error-field",class:[e.currentPswdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.currentPswdErrorMsg))])])]),t("tr",[t("td",{staticClass:"tab-label"},[e._v("Nouveau mot de passe :")]),t("td",{staticClass:"tab-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newPswd,expression:"newPswd"}],staticClass:"input",class:["error"===e.newPswdValid?"error":"","valid"===e.newPswdValid?"valid":""],attrs:{type:"password"},domProps:{value:e.newPswd},on:{input:function(s){s.target.composing||(e.newPswd=s.target.value)}}}),t("span",{staticClass:"error-field",class:[e.newPswdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.newPswdErrorMsg))])])]),t("tr",[t("td",{staticClass:"tab-label"},[e._v("Confirmation du ouveau mot de passe :")]),t("td",{staticClass:"tab-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newPswdConfirm,expression:"newPswdConfirm"}],staticClass:"input",class:["error"===e.newPswdConfirmValid?"error":"","valid"===e.newPswdConfirmValid?"valid":""],attrs:{type:"password"},domProps:{value:e.newPswdConfirm},on:{input:function(s){s.target.composing||(e.newPswdConfirm=s.target.value)}}}),t("span",{staticClass:"error-field",class:[e.newPswdConfirmErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.newPswdConfirmErrorMsg))])])]),t("tr",[t("td",{staticStyle:{"padding-top":"10px"},attrs:{colspan:"2"}},[t("button",{staticClass:"button red large",on:{click:function(s){return e.updatePswd()}}},[e._v("Modifier le mot de passe")])])])])])])]),t("div",{staticClass:"col-5"},[t("h2",[e._v("Statistiques")]),t("div",{staticClass:"white-container"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col user-stats"},[t("h3",[e._v("Wake-words enregistrés")]),t("div",{staticClass:"stats-container"},[t("span",{staticClass:"icon talk"}),t("span",{staticClass:"number talk"},[e._v(e._s(e.userInfos.nbRecord))])]),t("button",{staticClass:"button red"},[e._v("S'enregistrer")])]),t("div",{staticClass:"col user-stats"},[t("h3",[e._v("Wake-words écoutés")]),t("div",{staticClass:"stats-container"},[t("span",{staticClass:"icon listen"}),t("span",{staticClass:"number listen"},[e._v(e._s(e.userInfos.nbListen))])]),t("button",{staticClass:"button green"},[e._v("Écouter")])])])])])])])])])},re=[],ie={data:function(){return{userEmail:"",userEmailValid:!1,userEmailErrorMsg:"",lastNameValid:!1,lastNameErrorMsg:"",firstNameValid:!1,firstNameErrorMsg:"",currentPswd:"",currentPswdValid:!1,currentPswdErrorMsg:"",newPswd:"",newPswdValid:!1,newPswdErrorMsg:"",newPswdConfirm:"",newPswdConfirmValid:!1,newPswdConfirmErrorMsg:""}},computed:{userInfos:function(){return this.userEmail=this.$store.state.userInfos.email,this.$store.state.userInfos}},methods:{setMicrophone:function(e){this.userInfos.deviceType=e},validateEmail:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},validateNames:function(e){return/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/.test(e)},checkProfil:function(){var e=!0;return this.validateEmail(this.userEmail)?(this.userEmailValid="valid",this.userEmailErrorMsg=""):(e=!1,0===this.userInfos.email.length?(this.userEmailValid="error",this.userEmailErrorMsg="Veuillez renseigner une adresse email"):(this.userEmailValid="error",this.userEmailErrorMsg="Le format de l'adresse email est invalide")),this.validateNames(this.userInfos.lastName)||0===this.userInfos.lastName.length?(this.lastNameValid="valid",this.lastNameErrorMsg=""):(e=!1,this.lastNameValid="error",this.lastNameErrorMsg="Veuillez saisir un Nom valide"),this.validateNames(this.userInfos.firstName)||0===this.userInfos.firstName.length?(this.firstNameValid="valid",this.firstNameErrorMsg=""):(e=!1,this.firstNameValid="error",this.firstNameErrorMsg="Veuillez saisir un Prénom valide"),e},updateProfil:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var s,t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.checkProfil(),!s){e.next=10;break}return t=this.userInfos,t.email=this.userEmail,e.next=6,c()("".concat("http://localhost:3003","/api/updateUser"),{method:"post",data:t});case 6:a=e.sent,"success"===a.data.status&&(this.userEmailValid=!1,this.lastNameValid=!1,this.firstNameValid=!1,me.$emit("notify_app",{status:"success",msg:"Vos informations ont été mises à jour",redirect:!1}),this.$store.dispatch("getUserInfos",this.userInfos.emailHash)),e.next=11;break;case 10:return e.abrupt("return");case 11:case"end":return e.stop()}},e,this)}));function s(){return e.apply(this,arguments)}return s}(),checkPswd:function(){var e=!0;return 0===this.currentPswd.length?(e=!1,this.currentPswdValid="error",this.currentPswdErrorMsg="Veuillez saisir votre mot de passe actuel"):(this.currentPswdValid="valid",this.currentPswdErrorMsg=""),0===this.newPswd.length?(e=!1,this.newPswdValid="error",this.newPswdErrorMsg="Veuillez saisir un nouveau mot de passe"):this.newPswd===this.currentPswd?(e=!1,this.newPswdValid="error",this.newPswdErrorMsg="Le nouveau mot de passe doit être différent de l'actuel"):this.newPswd.length<8?(e=!1,this.newPswdValid="error",this.newPswdErrorMsg="Votre mot de passe doit contenir au moins 8 caractères"):(this.newPswdValid="valid",this.newPswdErrorMsg=""),0===this.newPswdConfirm.length?(e=!1,this.newPswdConfirmValid="error",this.newPswdConfirmErrorMsg="Veuillez confirmer votre nouveau mot de passe"):this.newPswdConfirm!=this.newPswd?(e=!1,this.newPswdConfirmValid="error",this.newPswdConfirmErrorMsg="Les mots de passe saisis ne correspondent pas"):(this.newPswdConfirmValid="valid",this.newPswdConfirmErrorMsg=""),e},updatePswd:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var s,t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.checkPswd(),!s){e.next=9;break}return t={currentPswd:this.currentPswd,newPswd:this.newPswd,emailHash:this.userInfos.emailHash},e.next=5,c()("".concat("http://localhost:3003","/api/updateUserPswd"),{method:"post",data:t});case 5:a=e.sent,"success"===a.data.status?(me.$emit("notify_app",{status:"success",msg:"Votre mot de passe a été modifié",redirect:!1}),this.$store.dispatch("getUserInfos",this.userInfos.emailHash)):"error"===a.data.status&&(0===a.data.code?(this.currentPswdValid="error",this.currentPswdErrorMsg="Le mot de passe saisi est invalide"):me.$emit("notify_app",{status:a.status,msg:a.data.msg,redirect:!1})),e.next=10;break;case 9:return e.abrupt("return");case 10:case"end":return e.stop()}},e,this)}));function s(){return e.apply(this,arguments)}return s}()}},ne=ie,oe=Object(m["a"])(ne,ae,re,!1,null,null,null),le=oe.exports;a["a"].use(M["a"]);var ce=new M["a"]({mode:"history",base:"/assets/",routes:[{path:"/",name:"home",component:B},{path:"/interface/account",name:"Compte utilisateur",component:le},{path:"/interface/record",name:"Compte utilisateur",component:te}]}),de=t("2f62");a["a"].use(de["a"]);var ue=new de["a"].Store({strict:!1,state:{userInfos:"",scenarios:""},mutations:{SET_USER:function(e,s){e.userInfos={email:s.email,gender:s.gender,deviceType:s.deviceType,firstName:s.firstName,lastName:s.lastName,ageRange:s.ageRange,nbListen:s.nbListen,nbRecord:s.nbRecord,anonymous:s.anonymous,emailHash:s.emailHash,listenList:s.listenList,recordList:s.recordList}},SET_SCENARIOS:function(e,s){e.scenarios=s}},actions:{getUserInfos:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(s,t){var a,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=s.commit,r=s.state,e.prev=1,e.next=4,c()("".concat("http://localhost:3003","/api/getUserInfos"),{method:"post",data:{hash:t}});case 4:return i=e.sent,a("SET_USER",i.data.user[0]),e.abrupt("return",r.userInfos);case 9:e.prev=9,e.t0=e["catch"](1),console.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}));function s(s,t){return e.apply(this,arguments)}return s}(),getScenarios:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(s){var t,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=s.commit,a=s.state,e.prev=1,e.next=4,c()("".concat("http://localhost:3003","/api/scenarios"),{method:"get"});case 4:return r=e.sent,t("SET_SCENARIOS",r.data.scenarios),e.abrupt("return",a.scenarios);case 9:e.prev=9,e.t0=e["catch"](1),console.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}));function s(s){return e.apply(this,arguments)}return s}()},getters:{}});t.d(s,"bus",function(){return me}),a["a"].config.productionTip=!1;var me=new a["a"];new a["a"]({router:ce,store:ue,render:function(e){return e(y)}}).$mount("#app")}});
//# sourceMappingURL=index.1226beb6.js.map