(function(e){function t(t){for(var a,n,l=t[0],o=t[1],c=t[2],d=0,m=[];d<l.length;d++)n=l[d],r[n]&&m.push(r[n][0]),r[n]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,l=1;l<s.length;l++){var o=s[l];0!==r[o]&&(a=!1)}a&&(i.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},r={index:0},i=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/assets/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=o;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{attrs:{id:"header"}},[s("HeaderApp")],1),s("transition",[s("keep-alive",[s("router-view")],1)],1)],1)},i=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header-container container-fluid"},[s("div",{staticClass:"row"},[e._m(0),s("div",{staticClass:"col user-panel"},[e.userConnected?e._e():s("button",{staticClass:"button red",on:{click:function(t){return e.toggleConnectionModal()}}},[e._v("Se connecter/S'inscrire")]),e.userConnected?s("div",{staticClass:"user-menu"},[s("button",{staticClass:"toggle-user-menu",class:[e.showUserMenu?"opened":"closed"],on:{click:e.toggleUserMenu}},[s("span",{staticClass:"label"},[e._v(e._s(e.userInfos.email))]),s("span",{staticClass:"icon"})]),s("div",{staticClass:"user-submenu",class:[e.showUserMenu?"visible":"hidden"]},[e._m(1),e._m(2)])]):e._e()])])])},l=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col logo-container"},[s("a",{attrs:{href:"/"}},[s("img",{attrs:{id:"wakemeup-logo",src:"/assets/img/wakemeup-logo.svg",alt:"Wake Me Up"}})]),s("img",{attrs:{id:"linagora-labs-logo",src:"/assets/img/linagora-labs.png",alt:"Linagora Labs"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"user-submenu-link",attrs:{href:"/interface/account"}},[s("span",{staticClass:"icon user"}),s("span",{staticClass:"label user"},[e._v("Mon compte")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"user-submenu-link logout",attrs:{href:"/logout"}},[s("span",{staticClass:"icon logout"}),s("span",{staticClass:"label logout"},[e._v("Déconnexion")])])}],o=(s("28a5"),s("bc3a")),c=s.n(o),u={data:function(){return{userConnected:!1,showUserMenu:!1}},created:function(){var e=this,t=this.getCookie("wmu_user");"disconnected"!==t&&this.$store.dispatch("getUserInfos",t).then(function(t){t&&(e.userConnected=!0)},function(e){console.error("error:",err)})},computed:{userInfos:function(){return this.$store.state.userInfos}},methods:{toggleConnectionModal:function(){ee.$emit("toggle_connection_modal",{})},toggleUserMenu:function(){this.showUserMenu=!this.showUserMenu},getCookie:function(e){for(var t=e+"=",s=document.cookie.split(";"),a=0;a<s.length;a++){var r=s[a];while(" "==r.charAt(0))r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}}},d=u,m=s("2877"),v=Object(m["a"])(d,n,l,!1,null,null,null),p=v.exports,f={data:function(){return{}},components:{HeaderApp:p}},h=f,g=Object(m["a"])(h,r,i,!1,null,null,null),C=g.exports,b=s("8c4f"),_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),s("ConnectionModal"),s("CreateAccountModal")],1)},w=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"page-content"}},[s("div",{attrs:{id:"home"}},[s("div",{staticClass:"container-fluid",attrs:{id:"highlight"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col talk"},[s("h2",[e._v("Enregistrez votre voix")]),s("div",{staticClass:"title-icon"},[s("img",{attrs:{src:"/assets/img/talk.svg",alt:"Parler"}})]),s("div",{staticClass:"highlight-content"},[e._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam euismod malesuada nisl, sit amet vulputate justo interdum nec. Donec lobortis, ipsum vitae hendrerit sodales, purus risus fringilla ante, eu auctor mi velit ut turpis.")]),s("div",{staticClass:"highlight-action"},[s("button",{staticClass:"button red"},[e._v("Enregistrez votre voix")])])]),s("div",{staticClass:"col listen"},[s("h2",[e._v("Écoutez et participez à la validation")]),s("div",{staticClass:"title-icon"},[s("img",{attrs:{src:"/assets/img/listen.svg",alt:"Ecouter"}})]),s("div",{staticClass:"highlight-content"},[e._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam euismod malesuada nisl, sit amet vulputate justo interdum nec. Donec lobortis, ipsum vitae hendrerit sodales, purus risus fringilla ante, eu auctor mi velit ut turpis.")]),s("div",{staticClass:"highlight-action"},[s("button",{staticClass:"button green"},[e._v("Écouter des enregistrements")])])])])]),s("div",{staticClass:"divider red shadowTop"})])])}],E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"modal",class:[e.showConnectionModal?"visible":"hidden"]},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-header"},[s("h3",{staticClass:"modal-title red"},[e._v("Se connecter")]),s("button",{staticClass:"close-modal",on:{click:e.closeModal}})]),s("div",{staticClass:"modal-body"},[s("span",[e._v("Veuillez renseigner vos identifiants")]),s("div",{staticClass:"field-container"},[e._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userEmail,expression:"userEmail"}],staticClass:"input",class:["error"===e.userEmailValid?"error":"","valid"===e.userEmailValid?"valid":""],attrs:{type:"text"},domProps:{value:e.userEmail},on:{input:function(t){t.target.composing||(e.userEmail=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.userEmailErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userEmailErrorMsg))])]),s("div",{staticClass:"field-container"},[e._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPswd,expression:"userPswd"}],staticClass:"input",class:["error"===e.userPswdValid?"error":"","valid"===e.userPswdValid?"valid":""],attrs:{type:"password"},domProps:{value:e.userPswd},on:{input:function(t){t.target.composing||(e.userPswd=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.userPswdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userPswdErrorMsg))])]),s("div",{staticClass:"field-container btn"},[s("button",{staticClass:"button red large",on:{click:function(t){return e.sendLogin()}}},[e._v("S'identifier")])]),s("button",{staticClass:"aslink"},[e._v("Identifiants oubliés ?")]),s("div",{staticClass:"spacer"}),s("div",{staticClass:"divider red"}),s("div",{staticClass:"spacer"}),s("span",[e._v("Vous n'avez pas d'identifiants ?")]),s("div",{staticClass:"field-container btn"},[s("button",{staticClass:"button green large",on:{click:e.toggleCreateAccountModal}},[e._v("Créer un compte")])])])])])])},M=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-label"},[s("span",{staticClass:"icon user"}),s("span",{staticClass:"label"},[e._v("Adresse email:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-label"},[s("span",{staticClass:"icon pswd"}),s("span",{staticClass:"label"},[e._v("Mot de passe :")])])}],P=(s("96cf"),s("3b8d")),V={data:function(){return{showConnectionModal:!1,userEmail:"rlopez@linagora.com",userEmailValid:!1,userEmailErrorMsg:"",userPswd:"admin",userPswdValid:!1,userPswdErrorMsg:""}},mounted:function(){var e=this;ee.$on("toggle_connection_modal",function(){e.toggleConnectionModal()})},methods:{toggleConnectionModal:function(){this.showConnectionModal=!this.showConnectionModal},closeModal:function(){this.showConnectionModal=!1},toggleCreateAccountModal:function(){this.showConnectionModal=!1,ee.$emit("toggle_create_account_modal",{})},validateEmail:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},checkForm:function(){return 0===this.userEmail.length?(this.userEmailValid="error",this.userEmailErrorMsg="Vous devez renseigner une adresse email de connection"):this.validateEmail(this.userEmail)?(this.userEmailValid="valid",this.userEmailErrorMsg=""):(this.userEmailValid="error",this.userEmailErrorMsg="Le format de l'adresse email est invalide"),0===this.userPswd.length?(this.userPswdValid="error",this.userPswdErrorMsg="Veuillez renseigner un mot de passe"):(this.userPswdValid="valid",this.userPswdErrorMsg=""),"valid"===this.userEmailValid&&"valid"===this.userPswdValid},sendLogin:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.checkForm(),!t){e.next=9;break}return s={email:this.userEmail,password:this.userPswd},e.next=5,c()("http://localhost:3003/login/userAuth",{method:"post",data:s});case 5:a=e.sent,"error"===a.data.status?"user"===a.data.field?(this.userEmailValid="error",this.userEmailErrorMsg=a.data.msg):"password"===a.data.field&&(this.userPswdValid="error",this.userPswdErrorMsg=a.data.msg):"success"===a.data.status&&(document.location.href="/interface/overview"),e.next=10;break;case 9:return e.abrupt("return");case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},y=V,k=Object(m["a"])(y,E,M,!1,null,null,null),N=k.exports,x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"modal",class:[e.showCreateAccountModal?"visible":"hidden"]},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-header"},[s("h3",{staticClass:"modal-title green"},[e._v("Créer un compte")]),s("button",{staticClass:"close-modal",on:{click:function(t){return e.closeModal()}}}),s("button",{staticClass:"back-login-modal",on:{click:function(t){return e.backToLogin()}}})]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"field-container"},[e._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userEmail,expression:"userEmail"}],staticClass:"input",class:["error"===e.userEmailValid?"error":"","valid"===e.userEmailValid?"valid":""],attrs:{type:"text"},domProps:{value:e.userEmail},on:{input:function(t){t.target.composing||(e.userEmail=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.userEmailErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userEmailErrorMsg))])]),s("div",{staticClass:"field-container"},[e._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPswd,expression:"userPswd"}],staticClass:"input",class:["error"===e.userPswdValid?"error":"","valid"===e.userPswdValid?"valid":""],attrs:{type:"password"},domProps:{value:e.userPswd},on:{input:function(t){t.target.composing||(e.userPswd=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.userPswdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userPswdErrorMsg))])]),s("div",{staticClass:"field-container"},[e._m(2),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPswdConfirm,expression:"userPswdConfirm"}],staticClass:"input",class:["error"===e.userPswdConfirmValid?"error":"","valid"===e.userPswdConfirmValid?"valid":""],attrs:{type:"password"},domProps:{value:e.userPswdConfirm},on:{input:function(t){t.target.composing||(e.userPswdConfirm=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.userPswdConfirmdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userPswdConfirmdErrorMsg))])]),s("div",{staticClass:"field-container"},[s("div",{staticClass:"field-label"},[s("span",{staticClass:"required"},[e._v("*")]),s("span",{staticClass:"label"},[e._v("Sexe :")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.userGender,expression:"userGender"}],staticClass:"select",class:["error"===e.userGenderValid?"error":"","valid"===e.userGenderValid?"valid":""],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.userGender=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",hidden:""}},[e._v("Sélectionner un sexe")]),s("option",{attrs:{value:"male"}},[e._v("Homme")]),s("option",{attrs:{value:"female"}},[e._v("Femme")])])]),s("span",{staticClass:"error-field",class:[e.userGenderErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userGenderErrorMsg))])]),s("div",{staticClass:"field-container"},[e._m(3),s("div",{staticClass:"micro-type-container"},[s("div",{staticClass:"micro-type-item",class:["default"==e.deviceType?"active":""],on:{click:function(t){return e.setMicrophone("default")}}},[s("span",{staticClass:"icon default"}),s("span",{staticClass:"label"},[e._v("Micro par défaut")])]),s("div",{staticClass:"micro-type-item",class:["casque"==e.deviceType?"active":""],on:{click:function(t){return e.setMicrophone("casque")}}},[s("span",{staticClass:"icon casque"}),s("span",{staticClass:"label"},[e._v("Micro-casque")])]),s("div",{staticClass:"micro-type-item",class:["pied"==e.deviceType?"active":""],on:{click:function(t){return e.setMicrophone("pied")}}},[s("span",{staticClass:"icon pied"}),s("span",{staticClass:"label"},[e._v("Micro à pied")])])])]),s("div",{staticClass:"field-container btn"},[s("button",{staticClass:"button green large",on:{click:function(t){return e.sendForm()}}},[e._v(e._s(e.btnCreateAccountLabel))]),s("span",{staticClass:"status-field",class:[e.createAccountStatus.length>0?"visible "+e.createAccountStatus:"hidden"]},[e._v(e._s(e.createAccoutMsg))])])])])])])},I=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-label"},[s("span",{staticClass:"required"},[e._v("*")]),s("span",{staticClass:"label"},[e._v("Adresse email:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-label"},[s("span",{staticClass:"required"},[e._v("*")]),s("span",{staticClass:"label"},[e._v("Mot de passe :")]),s("button",{staticClass:"info-label"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-label"},[s("span",{staticClass:"required"},[e._v("*")]),s("span",{staticClass:"label"},[e._v("Confirmation du mot de passe :")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-label"},[s("span",{staticClass:"required"},[e._v("*")]),s("span",{staticClass:"label"},[e._v("Type de mircophone :")])])}],A={data:function(){return{showCreateAccountModal:!1,deviceType:"default",userEmail:"",userEmailValid:!1,userEmailErrorMsg:"",userPswd:"",userPswdValid:!1,userPswdErrorMsg:"",userPswdConfirm:"",userPswdConfirmValid:!1,userPswdConfirmdErrorMsg:"",userGender:"",userGenderValid:!1,userGenderErrorMsg:"",btnCreateAccountLabel:"Créer un compte",createAccountStatus:"",createAccoutMsg:""}},mounted:function(){var e=this;ee.$on("toggle_create_account_modal",function(){e.showCreateAccountModal=!0})},methods:{setMicrophone:function(e){this.deviceType=e},closeModal:function(){this.showCreateAccountModal=!1},backToLogin:function(){this.showCreateAccountModal=!1,ee.$emit("toggle_connection_modal",function(){})},validateEmail:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},sendForm:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.checkForm(),!t){e.next=12;break}return this.btnCreateAccountLabel="Création en cours...",s={email:this.userEmail,pswd:this.userPswd,gender:this.userGender,deviceType:this.deviceType},e.next=6,c()("http://localhost:3003/login/createUser",{method:"post",data:s});case 6:a=e.sent,this.createAccountStatus=a.data.status,this.createAccoutMsg=a.data.msg,"success"===a.data.status?(this.btnCreateAccountLabel="Succès",this.createAccoutMsg+=", vous allez être redirigé dans 3 sec",this.setCookie("wmu_user",a.data.userHash),setTimeout(function(){document.location.href="/interface/overview"},3e3)):this.btnCreateAccountLabel="Créer un compte",e.next=13;break;case 12:return e.abrupt("return");case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),checkForm:function(){return 0===this.userEmail.length?(this.userEmailValid="error",this.userEmailErrorMsg="Veuillez renseigner une adresse email"):this.validateEmail(this.userEmail)?(this.userEmailValid="valid",this.userEmailErrorMsg=""):(this.userEmailValid="error",this.userEmailErrorMsg="Le format de l'adresse email est invalide"),0===this.userPswd.length?(this.userPswdValid="error",this.userPswdErrorMsg="Veuillez renseigner un mot de passe"):this.userPswd.length<8?(this.userPswdValid="error",this.userPswdErrorMsg="Le mot de passe doit contenir au moins 8 caractères"):(this.userPswdValid="valid",this.userPswdErrorMsg=""),0===this.userPswdConfirm.length?this.userPswdConfirmValid="error":this.userPswdConfirm!==this.userPswd?(this.userPswdConfirmValid="error",this.userPswdConfirmdErrorMsg="Les mots de passes doivent êtres identiques"):(this.userPswdConfirmValid="valid",this.userPswdConfirmdErrorMsg=""),""===this.userGender?(this.userGenderValid="error",this.userGenderErrorMsg="Veuillez sélectionner un sexe"):(this.userGenderValid="valid",this.userGenderErrorMsg=""),"valid"===this.userEmailValid&&"valid"===this.userPswdValid&&"valid"===this.userPswdConfirmValid&&"valid"===this.userGenderValid},setCookie:function(e,t,s){var a=new Date;a.setTime(a.getTime()+24*s*60*60);var r="expires="+a.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},getCookie:function(e){for(var t=e+"=",s=document.cookie.split(";"),a=0;a<s.length;a++){var r=s[a];while(" "==r.charAt(0))r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}}},$=A,T=Object(m["a"])($,x,I,!1,null,null,null),S=T.exports,j={data:function(){return{showConnectModal:!1}},components:{Header:p,ConnectionModal:N,CreateAccountModal:S}},O=j,L=Object(m["a"])(O,_,w,!1,null,null,null),z=L.exports,G=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},R=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"page-content"},[e._v("\n    Interface overview\n  ")])])}],U={data:function(){return{}}},q=U,F=Object(m["a"])(q,G,R,!1,null,null,null),H=F.exports,D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"page-content"}},[s("div",{staticClass:"container-fluid"},[s("div",{attrs:{clas:"row"}},[s("div",{staticClass:"col-5"},[s("h3",[e._v("Informations utilisateur")]),s("div",{staticClass:"white-container"},[s("table",{staticClass:"user-panel-tab"},[s("tbody",[s("tr",[s("td",{staticClass:"tab-label"},[e._v("Adresse email :")]),s("td",{staticClass:"tab-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userEmail,expression:"userEmail"}],staticClass:"input",class:["error"===e.userEmailValid?"error":"","valid"===e.userEmailValid?"valid":""],domProps:{value:e.userEmail},on:{input:function(t){t.target.composing||(e.userEmail=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.userEmailErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userEmailErrorMsg))])])]),s("tr",[s("td",{staticClass:"tab-label"},[e._v("Sexe :")]),s("td",{staticClass:"tab-input"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.userInfos.gender,expression:"userInfos.gender"}],staticClass:"select",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.userInfos,"gender",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"male"}},[e._v("Homme")]),s("option",{attrs:{value:"female"}},[e._v("Femme")])])])]),s("tr",[s("td",{staticClass:"tab-label"},[e._v("Type de microphone :")]),s("td",{staticClass:"tab-input"},[s("div",{staticClass:"micro-type-container"},[s("div",{staticClass:"micro-type-item",class:["default"===e.userInfos.deviceType?"active":""],on:{click:function(t){return e.setMicrophone("default")}}},[s("span",{staticClass:"icon default"}),s("span",{staticClass:"label"},[e._v("Micro par défaut")])]),s("div",{staticClass:"micro-type-item",class:["casque"===e.userInfos.deviceType?"active":""],on:{click:function(t){return e.setMicrophone("casque")}}},[s("span",{staticClass:"icon casque"}),s("span",{staticClass:"label"},[e._v("Micro-casque")])]),s("div",{staticClass:"micro-type-item",class:["pied"===e.userInfos.deviceType?"active":""],on:{click:function(t){return e.setMicrophone("pied")}}},[s("span",{staticClass:"icon pied"}),s("span",{staticClass:"label"},[e._v("Micro à pied")])])])])])])]),s("div",{staticClass:"spacer"}),s("div",{staticClass:"divider grey"}),s("div",{staticClass:"spacer"}),s("span",{staticClass:"info"},[e._v("Les informations suivantes sont facultatives")]),s("table",{staticClass:"user-panel-tab"},[s("tbody",[s("tr",[s("td",{staticClass:"tab-label"},[e._v("Nom :")]),s("td",{staticClass:"tab-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfos.lastName,expression:"userInfos.lastName"}],staticClass:"input",class:["error"===e.lastNameValid?"error":"","valid"===e.lastNameValid?"valid":""],domProps:{value:e.userInfos.lastName},on:{input:function(t){t.target.composing||e.$set(e.userInfos,"lastName",t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.lastNameErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.lastNameErrorMsg))])])]),s("tr",[s("td",{staticClass:"tab-label"},[e._v("Prénom :")]),s("td",{staticClass:"tab-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfos.firstName,expression:"userInfos.firstName"}],staticClass:"input",class:["error"===e.firstNameValid?"error":"","valid"===e.firstNameValid?"valid":""],domProps:{value:e.userInfos.firstName},on:{input:function(t){t.target.composing||e.$set(e.userInfos,"firstName",t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.firstNameErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.firstNameErrorMsg))])])]),s("tr",[s("td",{staticClass:"tab-label"},[e._v("Tranche d'âge :")]),s("td",{staticClass:"tab-input"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.userInfos.ageRange,expression:"userInfos.ageRange"}],staticClass:"select",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.userInfos,"ageRange",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"",hidden:""}},[e._v("Sélectionner votre tranche d'âge")]),s("option",{attrs:{value:"10-20"}},[e._v("10 - 20 ans")]),s("option",{attrs:{value:"20-30"}},[e._v("20 - 30 ans")]),s("option",{attrs:{value:"30-40"}},[e._v("30 - 40 ans")]),s("option",{attrs:{value:"40-50"}},[e._v("40 - 50 ans")]),s("option",{attrs:{value:"50-60"}},[e._v("50 - 60 ans")]),s("option",{attrs:{value:"60-70"}},[e._v("60 - 70 ans")]),s("option",{attrs:{value:"70+"}},[e._v("70+ ans")])])])]),s("tr",[s("td",{staticStyle:{"padding-top":"10px"},attrs:{colspan:"2"}},[s("button",{staticClass:"button green large",on:{click:function(t){return e.updateProfil()}}},[e._v("Mettre mes informations à jour")])])])])])])])])])])])},Z=[],J={data:function(){return{userEmail:"",userEmailValid:!1,userEmailErrorMsg:"",lastNameValid:!1,lastNameErrorMsg:"",firstNameValid:!1,firstNameErrorMsg:""}},computed:{userInfos:function(){return this.userEmail=this.$store.state.userInfos.email,this.$store.state.userInfos}},methods:{setMicrophone:function(e){this.userInfos.deviceType=e},validateEmail:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},validateNames:function(e){return/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/.test(e)},checkProfil:function(){var e=!0;return this.validateEmail(this.userEmail)?(this.userEmailValid="valid",this.userEmailErrorMsg=""):(e=!1,0===this.userInfos.email.length?(this.userEmailValid="error",this.userEmailErrorMsg="Veuillez renseigner une adresse email"):(this.userEmailValid="error",this.userEmailErrorMsg="Le format de l'adresse email est invalide")),this.validateNames(this.userInfos.lastName)||0===this.userInfos.lastName.length?(this.lastNameValid="valid",this.lastNameErrorMsg=""):(e=!1,this.lastNameValid="error",this.lastNameErrorMsg="Veuillez saisir un Nom valide"),this.validateNames(this.userInfos.firstName)||0===this.userInfos.firstName.length?(this.firstNameValid="valid",this.firstNameErrorMsg=""):(e=!1,this.firstNameValid="error",this.firstNameErrorMsg="Veuillez saisir un Prénom valide"),e},updateProfil:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.checkProfil(),!t){e.next=8;break}return e.next=4,c()("".concat("http://localhost:3003","/api/updateUser"),{method:"post",data:this.userInfos});case 4:s=e.sent,console.log(s),e.next=9;break;case 8:return e.abrupt("return");case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},W=J,B=Object(m["a"])(W,D,Z,!1,null,null,null),K=B.exports;a["a"].use(b["a"]);var Q=new b["a"]({mode:"history",base:"/assets/",routes:[{path:"/",name:"home",component:z},{path:"/interface/overview",name:"Interface",component:H},{path:"/interface/account",name:"Compte utilisateur",component:K}]}),X=s("2f62");a["a"].use(X["a"]);var Y=new X["a"].Store({strict:!1,state:{userInfos:""},mutations:{SET_USER:function(e,t){e.userInfos={email:t.email,gender:t.gender,deviceType:t.deviceType,firstName:t.firstName,lastName:t.lastName,ageRange:t.ageRange,nbListen:t.nbListen,nbRecord:t.nbRecord,anonymous:t.anonymous,emailHash:t.emailHash}}},actions:{getUserInfos:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(t,s){var a,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,r=t.state,e.prev=1,e.next=4,c()("".concat("http://localhost:3003","/api/getUserInfos"),{method:"post",data:{hash:s}});case 4:return i=e.sent,a("SET_USER",i.data.user[0]),e.abrupt("return",r.userInfos);case 9:e.prev=9,e.t0=e["catch"](1),console.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}));function t(t,s){return e.apply(this,arguments)}return t}()},getters:{}});s.d(t,"bus",function(){return ee}),a["a"].config.productionTip=!1;var ee=new a["a"];new a["a"]({router:Q,store:Y,render:function(e){return e(C)}}).$mount("#app")}});
//# sourceMappingURL=index.b9a07a5b.js.map