(function(e){function t(t){for(var a,n,o=t[0],l=t[1],c=t[2],u=0,m=[];u<o.length;u++)n=o[u],i[n]&&m.push(i[n][0]),i[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,o=1;o<s.length;o++){var l=s[o];0!==i[l]&&(a=!1)}a&&(r.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},i={index:0},r=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/assets/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},4678:function(e,t,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=r(e);return s(t)}function r(e){var t=a[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id="4678"},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{attrs:{id:"header"}},[s("HeaderApp"),s("AppNotify")],1),s("transition",[s("keep-alive",[s("router-view")],1)],1)],1)},r=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header-container container-fluid"},[s("div",{staticClass:"row"},[e._m(0),s("div",{staticClass:"col user-panel"},[e.userConnected?e._e():s("button",{staticClass:"button red",on:{click:function(t){return e.toggleConnectionModal()}}},[e._v("Se connecter/S'inscrire")]),e.userConnected?s("div",{staticClass:"user-menu"},[s("button",{staticClass:"toggle-user-menu",class:[e.showUserMenu?"opened":"closed"],on:{click:e.toggleUserMenu}},[s("span",{staticClass:"label"},[e._v(e._s(e.userInfos.email))]),s("span",{staticClass:"icon"})]),s("div",{staticClass:"user-submenu",class:[e.showUserMenu?"visible":"hidden"]},[e._m(1),e._m(2)])]):e._e()])])])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col logo-container"},[s("a",{attrs:{href:"/"}},[s("img",{attrs:{id:"wakemeup-logo",src:"/assets/img/wakemeup-logo.svg",alt:"Wake Me Up"}})]),s("img",{attrs:{id:"linagora-labs-logo",src:"/assets/img/linagora-labs.png",alt:"Linagora Labs"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"user-submenu-link",attrs:{href:"/interface/account"}},[s("span",{staticClass:"icon user"}),s("span",{staticClass:"label user"},[e._v("Mon compte")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"user-submenu-link logout",attrs:{href:"/logout"}},[s("span",{staticClass:"icon logout"}),s("span",{staticClass:"label logout"},[e._v("Déconnexion")])])}],l=(s("28a5"),s("bc3a")),c=s.n(l),d={data:function(){return{userConnected:!1,showUserMenu:!1}},created:function(){var e=this,t=this.getCookie("wmu_user");"disconnected"!==t&&this.$store.dispatch("getUserInfos",t).then(function(t){t&&(e.userConnected=!0)},function(e){console.error("error:",err)})},computed:{userInfos:function(){return this.$store.state.userInfos}},methods:{toggleConnectionModal:function(){be.$emit("toggle_connection_modal",{})},toggleUserMenu:function(){this.showUserMenu=!this.showUserMenu},getCookie:function(e){for(var t=e+"=",s=document.cookie.split(";"),a=0;a<s.length;a++){var i=s[a];while(" "==i.charAt(0))i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}}},u=d,m=s("2877"),h=Object(m["a"])(u,n,o,!1,null,null,null),f=h.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{style:e.notifHeight,attrs:{id:"notifyApp"}},[s("div",{class:e.status,attrs:{id:"notif-container"}},[s("span",{staticClass:"notif-line"}),s("span",{staticClass:"icon"}),s("span",{staticClass:"label"},[e._v(e._s(e.msg))])])])},v=[],g=(s("96cf"),s("3b8d")),b={data:function(){return{msg:"",status:"",redirect:"",notifHeight:"height: 0px;"}},mounted:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:be.$on("notify_app",function(e){t.msg=e.msg,t.status=e.status,t.redirect=e.redirect,t.redirect&&(t.msg+=" You will be redirected in 3sec..."),setTimeout(function(){var e=document.getElementById("notif-container").offsetHeight;t.notifHeight="height: "+(e+10)+"px"},200),setTimeout(function(){t.notifHeight="height: 0px;",t.redirect&&(document.location.href=t.redirect)},4e3)});case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},w=b,C=Object(m["a"])(w,p,v,!1,null,null,null),_=C.exports,E={data:function(){return{}},components:{HeaderApp:f,AppNotify:_}},y=E,j=Object(m["a"])(y,i,r,!1,null,null,null),P=j.exports,M=s("8c4f"),k=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),s("ConnectionModal"),s("CreateAccountModal")],1)},V=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"page-content"}},[s("div",{attrs:{id:"home"}},[s("div",{staticClass:"container-fluid",attrs:{id:"highlight"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col talk"},[s("h2",[e._v("Enregistrez votre voix")]),s("div",{staticClass:"title-icon"},[s("img",{attrs:{src:"/assets/img/talk.svg",alt:"Parler"}})]),s("div",{staticClass:"highlight-content"},[e._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam euismod malesuada nisl, sit amet vulputate justo interdum nec. Donec lobortis, ipsum vitae hendrerit sodales, purus risus fringilla ante, eu auctor mi velit ut turpis.")]),s("div",{staticClass:"highlight-action"},[s("a",{staticClass:"button red",attrs:{href:"/interface/record"}},[e._v("Enregistrez votre voix")])])]),s("div",{staticClass:"col listen"},[s("h2",[e._v("Écoutez et participez à la validation")]),s("div",{staticClass:"title-icon"},[s("img",{attrs:{src:"/assets/img/listen.svg",alt:"Ecouter"}})]),s("div",{staticClass:"highlight-content"},[e._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam euismod malesuada nisl, sit amet vulputate justo interdum nec. Donec lobortis, ipsum vitae hendrerit sodales, purus risus fringilla ante, eu auctor mi velit ut turpis.")]),s("div",{staticClass:"highlight-action"},[s("a",{staticClass:"button green",attrs:{href:"/interface/listen"}},[e._v("Écouter des enregistrements")])])])])]),s("div",{staticClass:"divider red shadowTop"})])])}],R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"modal",class:[e.showConnectionModal?"visible":"hidden"]},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-header"},[s("h3",{staticClass:"modal-title red"},[e._v("Se connecter")]),s("button",{staticClass:"close-modal",on:{click:e.closeModal}})]),s("div",{staticClass:"modal-body"},[s("span",[e._v("Veuillez renseigner vos identifiants")]),s("div",{staticClass:"field-container"},[e._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userEmail,expression:"userEmail"}],staticClass:"input",class:["error"===e.userEmailValid?"error":"","valid"===e.userEmailValid?"valid":""],attrs:{type:"text"},domProps:{value:e.userEmail},on:{input:function(t){t.target.composing||(e.userEmail=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.userEmailErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userEmailErrorMsg))])]),s("div",{staticClass:"field-container"},[e._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPswd,expression:"userPswd"}],staticClass:"input",class:["error"===e.userPswdValid?"error":"","valid"===e.userPswdValid?"valid":""],attrs:{type:"password"},domProps:{value:e.userPswd},on:{input:function(t){t.target.composing||(e.userPswd=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.userPswdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userPswdErrorMsg))])]),s("div",{staticClass:"field-container btn"},[s("button",{staticClass:"button red large",on:{click:function(t){return e.sendLogin()}}},[e._v("S'identifier")])]),s("button",{staticClass:"aslink"},[e._v("Identifiants oubliés ?")]),s("div",{staticClass:"spacer"}),s("div",{staticClass:"divider red"}),s("div",{staticClass:"spacer"}),s("span",[e._v("Vous n'avez pas d'identifiants ?")]),s("div",{staticClass:"field-container btn"},[s("button",{staticClass:"button green large",on:{click:e.toggleCreateAccountModal}},[e._v("Créer un compte")])])])])])])},x=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-label"},[s("span",{staticClass:"icon user"}),s("span",{staticClass:"label"},[e._v("Adresse email:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-label"},[s("span",{staticClass:"icon pswd"}),s("span",{staticClass:"label"},[e._v("Mot de passe :")])])}],I={data:function(){return{showConnectionModal:!1,userEmail:"rlopez@linagora.com",userEmailValid:!1,userEmailErrorMsg:"",userPswd:"admin",userPswdValid:!1,userPswdErrorMsg:""}},mounted:function(){var e=this;be.$on("toggle_connection_modal",function(){e.toggleConnectionModal()})},methods:{toggleConnectionModal:function(){this.showConnectionModal=!this.showConnectionModal},closeModal:function(){this.showConnectionModal=!1},toggleCreateAccountModal:function(){this.showConnectionModal=!1,be.$emit("toggle_create_account_modal",{})},validateEmail:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},checkForm:function(){return 0===this.userEmail.length?(this.userEmailValid="error",this.userEmailErrorMsg="Vous devez renseigner une adresse email de connection"):this.validateEmail(this.userEmail)?(this.userEmailValid="valid",this.userEmailErrorMsg=""):(this.userEmailValid="error",this.userEmailErrorMsg="Le format de l'adresse email est invalide"),0===this.userPswd.length?(this.userPswdValid="error",this.userPswdErrorMsg="Veuillez renseigner un mot de passe"):(this.userPswdValid="valid",this.userPswdErrorMsg=""),"valid"===this.userEmailValid&&"valid"===this.userPswdValid},sendLogin:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var t,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.checkForm(),!t){e.next=7;break}return s={email:this.userEmail,password:this.userPswd},e.next=5,c()("http://localhost:3003/login/userAuth",{method:"post",data:s});case 5:a=e.sent,"error"===a.data.status?"user"===a.data.field?(this.userEmailValid="error",this.userEmailErrorMsg=a.data.msg):"password"===a.data.field&&(this.userPswdValid="error",this.userPswdErrorMsg=a.data.msg):"success"===a.data.status&&(document.location.href="/");case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},A=I,S=Object(m["a"])(A,R,x,!1,null,null,null),N=S.exports,O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"modal",class:[e.showCreateAccountModal?"visible":"hidden"]},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-header"},[s("h3",{staticClass:"modal-title green"},[e._v("Créer un compte")]),s("button",{staticClass:"close-modal",on:{click:function(t){return e.closeModal()}}}),s("button",{staticClass:"back-login-modal",on:{click:function(t){return e.backToLogin()}}})]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"field-container"},[e._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userEmail,expression:"userEmail"}],staticClass:"input",class:["error"===e.userEmailValid?"error":"","valid"===e.userEmailValid?"valid":""],attrs:{type:"text"},domProps:{value:e.userEmail},on:{input:function(t){t.target.composing||(e.userEmail=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.userEmailErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userEmailErrorMsg))])]),s("div",{staticClass:"field-container"},[e._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPswd,expression:"userPswd"}],staticClass:"input",class:["error"===e.userPswdValid?"error":"","valid"===e.userPswdValid?"valid":""],attrs:{type:"password"},domProps:{value:e.userPswd},on:{input:function(t){t.target.composing||(e.userPswd=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.userPswdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userPswdErrorMsg))])]),s("div",{staticClass:"field-container"},[e._m(2),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPswdConfirm,expression:"userPswdConfirm"}],staticClass:"input",class:["error"===e.userPswdConfirmValid?"error":"","valid"===e.userPswdConfirmValid?"valid":""],attrs:{type:"password"},domProps:{value:e.userPswdConfirm},on:{input:function(t){t.target.composing||(e.userPswdConfirm=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.userPswdConfirmdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userPswdConfirmdErrorMsg))])]),s("div",{staticClass:"field-container"},[s("div",{staticClass:"field-label"},[s("span",{staticClass:"required"},[e._v("*")]),s("span",{staticClass:"label"},[e._v("Sexe :")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.userGender,expression:"userGender"}],staticClass:"select",class:["error"===e.userGenderValid?"error":"","valid"===e.userGenderValid?"valid":""],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.userGender=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",hidden:""}},[e._v("Sélectionner un sexe")]),s("option",{attrs:{value:"male"}},[e._v("Homme")]),s("option",{attrs:{value:"female"}},[e._v("Femme")])])]),s("span",{staticClass:"error-field",class:[e.userGenderErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userGenderErrorMsg))])]),s("div",{staticClass:"field-container"},[e._m(3),s("div",{staticClass:"micro-type-container"},[s("div",{staticClass:"micro-type-item",class:["default"==e.deviceType?"active":""],on:{click:function(t){return e.setMicrophone("default")}}},[s("span",{staticClass:"icon default"}),s("span",{staticClass:"label"},[e._v("Micro par défaut")])]),s("div",{staticClass:"micro-type-item",class:["casque"==e.deviceType?"active":""],on:{click:function(t){return e.setMicrophone("casque")}}},[s("span",{staticClass:"icon casque"}),s("span",{staticClass:"label"},[e._v("Micro-casque")])]),s("div",{staticClass:"micro-type-item",class:["pied"==e.deviceType?"active":""],on:{click:function(t){return e.setMicrophone("pied")}}},[s("span",{staticClass:"icon pied"}),s("span",{staticClass:"label"},[e._v("Micro à pied")])])])]),s("div",{staticClass:"field-container btn"},[s("button",{staticClass:"button green large",on:{click:function(t){return e.sendForm()}}},[e._v(e._s(e.btnCreateAccountLabel))]),s("span",{staticClass:"status-field",class:[e.createAccountStatus.length>0?"visible "+e.createAccountStatus:"hidden"]},[e._v(e._s(e.createAccoutMsg))])])])])])])},z=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-label"},[s("span",{staticClass:"required"},[e._v("*")]),s("span",{staticClass:"label"},[e._v("Adresse email:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-label"},[s("span",{staticClass:"required"},[e._v("*")]),s("span",{staticClass:"label"},[e._v("Mot de passe :")]),s("button",{staticClass:"info-label"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-label"},[s("span",{staticClass:"required"},[e._v("*")]),s("span",{staticClass:"label"},[e._v("Confirmation du mot de passe :")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-label"},[s("span",{staticClass:"required"},[e._v("*")]),s("span",{staticClass:"label"},[e._v("Type de mircophone :")])])}],$={data:function(){return{showCreateAccountModal:!1,deviceType:"default",userEmail:"",userEmailValid:!1,userEmailErrorMsg:"",userPswd:"",userPswdValid:!1,userPswdErrorMsg:"",userPswdConfirm:"",userPswdConfirmValid:!1,userPswdConfirmdErrorMsg:"",userGender:"",userGenderValid:!1,userGenderErrorMsg:"",btnCreateAccountLabel:"Créer un compte",createAccountStatus:"",createAccoutMsg:""}},mounted:function(){var e=this;be.$on("toggle_create_account_modal",function(){e.showCreateAccountModal=!0})},methods:{setMicrophone:function(e){this.deviceType=e},closeModal:function(){this.showCreateAccountModal=!1},backToLogin:function(){this.showCreateAccountModal=!1,be.$emit("toggle_connection_modal",function(){})},validateEmail:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},sendForm:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var t,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.checkForm(),!t){e.next=12;break}return this.btnCreateAccountLabel="Création en cours...",s={email:this.userEmail,pswd:this.userPswd,gender:this.userGender,deviceType:this.deviceType},e.next=6,c()("http://localhost:3003/login/createUser",{method:"post",data:s});case 6:a=e.sent,this.createAccountStatus=a.data.status,this.createAccoutMsg=a.data.msg,"success"===a.data.status?(this.btnCreateAccountLabel="Succès",this.createAccoutMsg+=", vous allez être redirigé dans 3 sec",this.setCookie("wmu_user",a.data.userHash),setTimeout(function(){document.location.href="/"},3e3)):this.btnCreateAccountLabel="Créer un compte",e.next=13;break;case 12:return e.abrupt("return");case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),checkForm:function(){return 0===this.userEmail.length?(this.userEmailValid="error",this.userEmailErrorMsg="Veuillez renseigner une adresse email"):this.validateEmail(this.userEmail)?(this.userEmailValid="valid",this.userEmailErrorMsg=""):(this.userEmailValid="error",this.userEmailErrorMsg="Le format de l'adresse email est invalide"),0===this.userPswd.length?(this.userPswdValid="error",this.userPswdErrorMsg="Veuillez renseigner un mot de passe"):this.userPswd.length<8?(this.userPswdValid="error",this.userPswdErrorMsg="Le mot de passe doit contenir au moins 8 caractères"):(this.userPswdValid="valid",this.userPswdErrorMsg=""),0===this.userPswdConfirm.length?this.userPswdConfirmValid="error":this.userPswdConfirm!==this.userPswd?(this.userPswdConfirmValid="error",this.userPswdConfirmdErrorMsg="Les mots de passes doivent êtres identiques"):(this.userPswdConfirmValid="valid",this.userPswdConfirmdErrorMsg=""),""===this.userGender?(this.userGenderValid="error",this.userGenderErrorMsg="Veuillez sélectionner un sexe"):(this.userGenderValid="valid",this.userGenderErrorMsg=""),"valid"===this.userEmailValid&&"valid"===this.userPswdValid&&"valid"===this.userPswdConfirmValid&&"valid"===this.userGenderValid},setCookie:function(e,t,s){var a=new Date;a.setTime(a.getTime()+24*s*60*60);var i="expires="+a.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"},getCookie:function(e){for(var t=e+"=",s=document.cookie.split(";"),a=0;a<s.length;a++){var i=s[a];while(" "==i.charAt(0))i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}}},L=$,U=Object(m["a"])(L,O,z,!1,null,null,null),T=U.exports,q={data:function(){return{showConnectModal:!1}},components:{Header:f,ConnectionModal:N,CreateAccountModal:T}},H=q,D=Object(m["a"])(H,k,V,!1,null,null,null),F=D.exports,B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"page-content"}},[s("div",{staticClass:"container-fluid h-100 talk green",attrs:{id:"player-container"}},[s("div",{staticClass:"row h-100"},[e._m(0),s("div",{staticClass:"col-9 h-100"},[e.audiosReady&&!e.noMoreAudio?s("div",{attrs:{id:"player-wrapper"}},[s("div",{staticClass:"say-word"},[s("h3",[e._v('"'),s("span",{staticClass:"word"},[e._v(e._s(e.wakeword))]),e._v('"')])]),s("div",[s("div",{staticClass:"btn-container"},[s("div",{staticClass:"player-anim"},[s("span",{staticClass:"sound-bar bsmall",class:[e.isRecording?"animate":""]}),s("span",{staticClass:"sound-bar bmed",class:[e.isRecording?"animate":""]}),s("span",{staticClass:"sound-bar bbig",class:[e.isRecording?"animate":""]})]),s("button",{staticClass:"button-play",class:e.isPlaying,attrs:{id:"start"},on:{click:function(t){return e.playAudio()}}}),s("div",{staticClass:"player-anim"},[s("span",{staticClass:"sound-bar bbig",class:[e.isRecording?"animate":""]}),s("span",{staticClass:"sound-bar bmed",class:[e.isRecording?"animate":""]}),s("span",{staticClass:"sound-bar bsmall",class:[e.isRecording?"animate":""]})]),s("span",{staticClass:"label"},[e._v("Écouter")])]),e.audioHasBeenListen&&!e.isPlaying?s("div",{staticClass:"sub-actions-container"},[s("div",{staticClass:"action-container"},[s("button",{staticClass:"btn-player votegood",on:{click:function(t){return e.sendVote("good")}}}),s("span",{staticClass:"label green"},[e._v("Valide")])]),s("div",{staticClass:"action-container"},[s("button",{staticClass:"btn-player votebad",on:{click:function(t){return e.sendVote("bad")}}}),s("span",{staticClass:"label red"},[e._v("Invalide")])])]):e._e()])]):e._e(),e.audiosReady||e.noMoreAudio?e._e():s("div",{staticClass:"loading"},[s("img",{staticClass:"loading-img",attrs:{src:"/assets/img/loading.gif"}}),s("span",{staticClass:"label"},[e._v("Chargement...")])]),!e.audiosReady&&e.noMoreAudio?s("div",{staticClass:"record-complete white-container"},[e._v('\n            Vous avez écouté tous les "wake-words". Merci !'),s("br"),s("a",{attrs:{href:"/"}},[e._v("Retour à l'accueil")])]):e._e()])])])])},G=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-3 h-100 player-content"},[s("h2",{staticClass:"green"},[e._v("Écoutez et validez des enregistrement")]),s("span",{staticClass:"content"},[e._v("\n          Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.\n        ")])])}],Y={data:function(){return{listenList:"",audiosReady:!1,wakeword:"",audioFile:"",userHash:"",isPlaying:"",playerAudio:null,audioHasBeenListen:!1,noMoreAudio:!1}},computed:{userInfos:function(){return this.$store.state.userInfos},audios:function(){return this.$store.state.audios}},watch:{userInfos:function(e){this.getAudios(e.emailHash)},audios:function(e){e.length>0?(this.noMoreAudio=!1,this.wakeword=e[0].wakeword,this.audioFile="/assets/audios/"+e[0].fieldname,this.audiosReady=!0,this.playerAudio=new Audio(this.audioFile)):this.noMoreAudio=!0}},methods:{getAudios:function(e){this.$store.dispatch("getAudios",e).then(function(e){},function(e){console.error("error:",err)})},playAudio:function(){var e=this;this.isPlaying="active",this.playerAudio.play(),this.playerAudio.addEventListener("ended",function(){e.isPlaying="",e.audioHasBeenListen=!0})},sendVote:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t){var s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s={audioId:this.audios[0]._id,vote:t,userHash:this.userInfos.emailHash},e.next=3,c()("".concat("http://localhost:3003","/api/audio/vote"),{method:"post",data:s});case 3:a=e.sent,a.data.voteAudio;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},W=Y,J=Object(m["a"])(W,B,G,!1,null,null,null),Z=J.exports,K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"page-content"}},[s("div",{staticClass:"container-fluid h-100 talk red",attrs:{id:"player-container"}},[s("div",{staticClass:"row h-100"},[e._m(0),s("div",{staticClass:"col-9 h-100"},[e.dataReady&&!e.allComplete?s("div",{attrs:{id:"player-wrapper"}},[s("div",{staticClass:"say-word"},[s("h3",[e._v('Dites : "'),s("span",{staticClass:"word"},[e._v(e._s(e.wakeword))]),e._v('"')])]),s("div",{staticClass:"btn-container"},[s("div",{staticClass:"player-anim"},[s("span",{staticClass:"sound-bar bsmall",class:[e.isRecording?"animate":""]}),s("span",{staticClass:"sound-bar bmed",class:[e.isRecording?"animate":""]}),s("span",{staticClass:"sound-bar bbig",class:[e.isRecording?"animate":""]})]),e.isRecording?e._e():s("button",{staticClass:"button-record",attrs:{id:"start"},on:{click:function(t){return e.startRecording()}}},[s("span",{staticClass:"icon"})]),e.isRecording?s("button",{staticClass:"button-record isRecording",attrs:{id:"stop"},on:{click:function(t){return e.stopRecording()}}},[s("span",{staticClass:"icon isRecording"})]):e._e(),s("div",{staticClass:"player-anim"},[s("span",{staticClass:"sound-bar bbig",class:[e.isRecording?"animate":""]}),s("span",{staticClass:"sound-bar bmed",class:[e.isRecording?"animate":""]}),s("span",{staticClass:"sound-bar bsmall",class:[e.isRecording?"animate":""]})]),s("span",{staticClass:"label"},[e._v("Enregistrer")])]),null===e.blob||e.isRecording?e._e():s("div",{staticClass:"sub-actions-container"},[s("div",{staticClass:"action-container"},[s("button",{staticClass:"btn-player play",class:e.isPlaying,on:{click:function(t){return e.playRecord()}}}),s("span",{staticClass:"label"},[e._v("Réécouter")])]),s("div",{staticClass:"action-container"},[s("button",{staticClass:"btn-player reset",on:{click:function(t){return e.startRecording()}}}),s("span",{staticClass:"label"},[e._v("Recommencer")])]),s("div",{staticClass:"action-container"},[s("button",{staticClass:"btn-player validate",class:e.recordIsValid,on:{click:function(t){return e.validRecord()}}}),s("span",{staticClass:"label"},[e._v("Valider")])])])]):e._e(),e.dataReady&&!e.allComplete?s("div",{staticClass:"player-timeline"},[s("div",{staticClass:"timeline"},[s("div",{staticClass:"progress",class:e.progressClass},[s("span",{staticClass:"progress-info"},[e._v(e._s(e.step)+"/3")])])])]):e._e(),!e.dataReady&&e.allComplete?s("div",{staticClass:"record-complete white-container"},[e._v('\n            Vous avez enregistrés tous les "wake-words". Merci !'),s("br"),s("a",{attrs:{href:"/"}},[e._v("Retour à l'accueil")])]):e._e(),e.dataReady||e.allComplete?e._e():s("div",{staticClass:"loading"},[s("img",{staticClass:"loading-img",attrs:{src:"/assets/img/loading.gif"}}),s("span",{staticClass:"label"},[e._v("Chargement...")])])])])])])},Q=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-3 h-100 player-content"},[s("h2",{staticClass:"red"},[e._v("Enregistrez votre voix")]),s("span",{staticClass:"content"},[e._v("\n          Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.\n        ")])])}],X=s("f499"),ee=s.n(X),te=(s("63d9"),s("e814")),se=s.n(te),ae=s("c1df"),ie=s.n(ae),re={data:function(){return{analyser:null,blob:null,buffer:null,bufferSize:4096,context:null,leftchannel:[],leftBuffer:"",mediaRecorder:null,mediaRecorderblob:null,mediaRecorderChunk:[],mediaStream:null,numberOfInputChannels:2,numberOfOutputChannels:2,recorder:null,recordingLength:0,rightchannel:[],rightBufffer:"",sampleRate:44100,sourceNode:null,view:null,volume:null,wakeword:"",audioConfig:null,step:0,scenariosLoaded:!1,dataReady:!1,allComplete:!1,progressClass:"",isRecording:!1,isPlaying:"",recordIsValid:""}},created:function(){var e=this;this.$store.dispatch("getScenarios").then(function(t){e.scenariosLoaded=!0},function(e){console.error("error:",err)})},computed:{scenarios:function(){return this.$store.state.scenarios},userInfos:function(){return this.$store.state.userInfos}},mounted:function(){var e=this;setTimeout(function(){var t=e.setScenario();t?(e.dataReady=!0,e.allComplete=!1,setTimeout(function(){e.initRecorder(e.audioConfig)},500)):(e.allComplete=!0,e.dataReady=!1)},1500)},methods:{setScenario:function(){var e=this;if(this.userInfos.recordList.length>0)this.userInfos.recordList.map(function(t){t.complete?e.scenarios.map(function(t){var s=t.wakeword,a=!1;e.userInfos.recordList.map(function(e){e.wakeword==s&&(a=!0)}),a||(e.wakeword=t.wakeword,e.step=1,e.audioConfig={label:"noOpt",echoCancellation:t.scenario.noOpt.echoCancellation,noiseSuppression:t.scenario.noOpt.noiseSuppression})}):(e.wakeword=t.wakeword,e.step=se()(t.step)+1,e.scenarios.map(function(s){if(s.wakeword=t.wakeword)for(var a in s.scenario)s.scenario[a].step==e.step&&(e.audioConfig={label:a,echoCancellation:s.scenario[a].echoCancellation,noiseSuppression:s.scenario[a].noiseSuppression})}))});else{var t=this.scenarios[0];this.step=1,this.wakeword=t.wakeword,this.audioConfig={label:"noOpt",echoCancellation:t.scenario.noOpt.echoCancellation,noiseSuppression:t.scenario.noOpt.noiseSuppression}}return this.progressClass="step-"+this.step,null!==this.audioConfig},startRecording:function(){this.leftchannel=[],this.rightchannel=[],this.isRecording=!0,this.mediaRecorder.start(),this.mediaStream.connect(this.recorder),this.recorder.connect(this.context.destination)},stopRecording:function(){var e=new Audio;this.isRecording=!1,this.recorder.disconnect(this.context.destination),this.mediaStream.disconnect(this.recorder),this.mediaRecorder.stop(),this.sourceNode=this.context.createMediaElementSource(e),this.sourceNode.connect(this.context.destination),this.leftBuffer=this.flattenArray(this.leftchannel,this.recordingLength),this.rightBuffer=this.flattenArray(this.rightchannel,this.recordingLength);var t=this.interleave(this.leftBuffer,this.rightBuffer);this.buffer=new ArrayBuffer(44+2*t.length),this.view=new DataView(this.buffer),this.writeUTFBytes(this.view,0,"RIFF"),this.view.setUint32(4,44+2*t.length,!0),this.writeUTFBytes(this.view,8,"WAVE"),this.writeUTFBytes(this.view,12,"fmt "),this.view.setUint32(16,16,!0),this.view.setUint16(20,1,!0),this.view.setUint16(22,2,!0),this.view.setUint32(24,this.sampleRate,!0),this.view.setUint32(28,4*this.sampleRate,!0),this.view.setUint16(32,4,!0),this.view.setUint16(34,16,!0),this.writeUTFBytes(this.view,36,"data"),this.view.setUint32(40,2*t.length,!0);for(var s=44,a=1,i=0;i<t.length;i++)this.view.setInt16(s,t[i]*(32767*a),!0),s+=2;this.blob=new Blob([this.view],{type:"audio/wav"});var r=this.analyser.context.sampleRate,n=this.analyser.channelCount,o=this.analyser.numberOfInputs,l=this.analyser.numberOfOutputs,c=this.recorder.bufferSize;this.webAudioInfos={contextSampleRate:r,bufferSize:c,nbChannels:n,nbInputs:o,nbOutputs:l,options:this.audioConfig.label}},playRecord:function(){var e=this;if(null!=this.blob){this.isPlaying="active";var t=window.URL.createObjectURL(this.blob),s=new Audio(t);s.play(),s.addEventListener("ended",function(){e.isPlaying=""})}},flattenArray:function(e,t){for(var s=new Float32Array(t),a=0,i=0;i<e.length;i++){var r=e[i];s.set(r,a),a+=r.length}return s},interleave:function(e,t){for(var s=e.length+t.length,a=new Float32Array(s),i=0,r=0;r<s;)a[r++]=e[i],a[r++]=t[i],i++;return a},writeUTFBytes:function(e,t,s){for(var a=0;a<s.length;a++)e.setUint8(t+a,s.charCodeAt(a))},sendDatas:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t,s,a){var i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={userHash:this.userInfos.emailHash,wakeword:this.wakeword,step:this.step},r=new FormData,r.append("webAudioInfos",ee()(s)),r.append("userInfos",ee()(i)),r.append(a,t,a),e.next=7,c()("http://localhost:3003/saveaudio",{method:"post",data:r});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));function t(t,s,a){return e.apply(this,arguments)}return t}(),validRecord:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var t,s,a,i,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=ie()().format("YYYYDDMmmhhmmss"),s=this.wakeword,a=this.audioConfig.label,i="".concat(s,"-").concat(a,"-").concat(t),1!==this.step){e.next=14;break}return e.next=7,this.sendDatas(this.blob,this.webAudioInfos,i+".wav");case 7:return r=e.sent,e.next=10,this.sendDatas(this.mediaRecorderblob,this.webAudioInfos,i+".webm");case 10:n=e.sent,"success"===r.data.status&&"success"===n.data.status?(this.recordIsValid="active",be.$emit("notify_app",{status:"success",msg:"Enregistrement validé",redirect:"/interface/record"})):be.$emit("notify_app",{status:"error",msg:"Erreur lors de l'enregistrement",redirect:!1}),e.next=18;break;case 14:return e.next=16,this.sendDatas(this.blob,this.webAudioInfos,i+".wav");case 16:r=e.sent,"success"===r.data.status?(this.recordIsValid="active",be.$emit("notify_app",{status:"success",msg:"Enregistrement validé",redirect:"/interface/record"})):be.$emit("notify_app",{status:"error",msg:"Erreur lors de l'enregistrement",redirect:!1});case 18:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),initRecorder:function(e){var t=this;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:{channelCount:{min:1,ideal:2},echoCancellation:e.echoCancellation,noiseSuppression:e.noiseSuppression}}).then(function(e){document.getElementById("start"),document.getElementById("stop");window.AudioContext=window.AudioContext||window.webkitAudioContext,t.context=new AudioContext,t.mediaStream=t.context.createMediaStreamSource(e),t.analyser=t.context.createAnalyser(),t.mediaRecorder=new MediaRecorder(e),t.context.createScriptProcessor?t.recorder=t.context.createScriptProcessor(t.bufferSize,t.numberOfInputChannels,t.numberOfOutputChannels):t.recorder=t.context.createJavaScriptNode(t.bufferSize,t.numberOfInputChannels,t.numberOfOutputChannels),t.mediaRecorderChunk=[],t.mediaRecorder.ondataavailable=function(e){t.mediaRecorderChunk.push(e.data),t.mediaRecorderblob=new Blob(t.mediaRecorderChunk,{type:"audio/webm; codecs=opus"})},t.recorder.onaudioprocess=function(e){t.leftchannel.push(new Float32Array(e.inputBuffer.getChannelData(0))),t.rightchannel.push(new Float32Array(e.inputBuffer.getChannelData(1))),t.recordingLength+=t.bufferSize}}).catch(function(e){console.error(e)})}}},ne=re,oe=Object(m["a"])(ne,K,Q,!1,null,null,null),le=oe.exports,ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"page-content"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row justify-content-around"},[s("div",{staticClass:"col-5"},[s("h2",[e._v("Informations utilisateur")]),s("div",{staticClass:"white-container"},[s("table",{staticClass:"user-panel-tab"},[s("tbody",[s("tr",[s("td",{staticClass:"tab-label"},[e._v("Adresse email :")]),s("td",{staticClass:"tab-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userEmail,expression:"userEmail"}],staticClass:"input",class:["error"===e.userEmailValid?"error":"","valid"===e.userEmailValid?"valid":""],domProps:{value:e.userEmail},on:{input:function(t){t.target.composing||(e.userEmail=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.userEmailErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.userEmailErrorMsg))])])]),s("tr",[s("td",{staticClass:"tab-label"},[e._v("Sexe :")]),s("td",{staticClass:"tab-input"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.userInfos.gender,expression:"userInfos.gender"}],staticClass:"select",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.userInfos,"gender",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"male"}},[e._v("Homme")]),s("option",{attrs:{value:"female"}},[e._v("Femme")])])])]),s("tr",[s("td",{staticClass:"tab-label"},[e._v("Type de microphone :")]),s("td",{staticClass:"tab-input"},[s("div",{staticClass:"micro-type-container"},[s("div",{staticClass:"micro-type-item",class:["default"===e.userInfos.deviceType?"active":""],on:{click:function(t){return e.setMicrophone("default")}}},[s("span",{staticClass:"icon default"}),s("span",{staticClass:"label"},[e._v("Micro par défaut")])]),s("div",{staticClass:"micro-type-item",class:["casque"===e.userInfos.deviceType?"active":""],on:{click:function(t){return e.setMicrophone("casque")}}},[s("span",{staticClass:"icon casque"}),s("span",{staticClass:"label"},[e._v("Micro-casque")])]),s("div",{staticClass:"micro-type-item",class:["pied"===e.userInfos.deviceType?"active":""],on:{click:function(t){return e.setMicrophone("pied")}}},[s("span",{staticClass:"icon pied"}),s("span",{staticClass:"label"},[e._v("Micro à pied")])])])])])])]),s("div",{staticClass:"spacer"}),s("div",{staticClass:"divider grey"}),s("div",{staticClass:"spacer"}),s("span",{staticClass:"info"},[e._v("Les informations suivantes sont facultatives")]),s("table",{staticClass:"user-panel-tab"},[s("tbody",[s("tr",[s("td",{staticClass:"tab-label"},[e._v("Nom :")]),s("td",{staticClass:"tab-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfos.lastName,expression:"userInfos.lastName"}],staticClass:"input",class:["error"===e.lastNameValid?"error":"","valid"===e.lastNameValid?"valid":""],domProps:{value:e.userInfos.lastName},on:{input:function(t){t.target.composing||e.$set(e.userInfos,"lastName",t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.lastNameErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.lastNameErrorMsg))])])]),s("tr",[s("td",{staticClass:"tab-label"},[e._v("Prénom :")]),s("td",{staticClass:"tab-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfos.firstName,expression:"userInfos.firstName"}],staticClass:"input",class:["error"===e.firstNameValid?"error":"","valid"===e.firstNameValid?"valid":""],domProps:{value:e.userInfos.firstName},on:{input:function(t){t.target.composing||e.$set(e.userInfos,"firstName",t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.firstNameErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.firstNameErrorMsg))])])]),s("tr",[s("td",{staticClass:"tab-label"},[e._v("Tranche d'âge :")]),s("td",{staticClass:"tab-input"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.userInfos.ageRange,expression:"userInfos.ageRange"}],staticClass:"select",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.userInfos,"ageRange",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"",hidden:""}},[e._v("Sélectionner votre tranche d'âge")]),s("option",{attrs:{value:"10-20"}},[e._v("10 - 20 ans")]),s("option",{attrs:{value:"20-30"}},[e._v("20 - 30 ans")]),s("option",{attrs:{value:"30-40"}},[e._v("30 - 40 ans")]),s("option",{attrs:{value:"40-50"}},[e._v("40 - 50 ans")]),s("option",{attrs:{value:"50-60"}},[e._v("50 - 60 ans")]),s("option",{attrs:{value:"60-70"}},[e._v("60 - 70 ans")]),s("option",{attrs:{value:"70+"}},[e._v("70+ ans")])])])]),s("tr",[s("td",{staticStyle:{"padding-top":"10px"},attrs:{colspan:"2"}},[s("button",{staticClass:"button green large",on:{click:function(t){return e.updateProfil()}}},[e._v("Mettre mes informations à jour")])])])])])]),s("h2",[e._v("Modifier le mot de passe")]),s("div",{staticClass:"white-container"},[s("table",{staticClass:"user-panel-tab"},[s("tbody",[s("tr",[s("td",{staticClass:"tab-label"},[e._v("Mot de passe actuel :")]),s("td",{staticClass:"tab-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.currentPswd,expression:"currentPswd"}],staticClass:"input",class:["error"===e.currentPswdValid?"error":"","valid"===e.currentPswdValid?"valid":""],attrs:{type:"password"},domProps:{value:e.currentPswd},on:{input:function(t){t.target.composing||(e.currentPswd=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.currentPswdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.currentPswdErrorMsg))])])]),s("tr",[s("td",{staticClass:"tab-label"},[e._v("Nouveau mot de passe :")]),s("td",{staticClass:"tab-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newPswd,expression:"newPswd"}],staticClass:"input",class:["error"===e.newPswdValid?"error":"","valid"===e.newPswdValid?"valid":""],attrs:{type:"password"},domProps:{value:e.newPswd},on:{input:function(t){t.target.composing||(e.newPswd=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.newPswdErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.newPswdErrorMsg))])])]),s("tr",[s("td",{staticClass:"tab-label"},[e._v("Confirmation du ouveau mot de passe :")]),s("td",{staticClass:"tab-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newPswdConfirm,expression:"newPswdConfirm"}],staticClass:"input",class:["error"===e.newPswdConfirmValid?"error":"","valid"===e.newPswdConfirmValid?"valid":""],attrs:{type:"password"},domProps:{value:e.newPswdConfirm},on:{input:function(t){t.target.composing||(e.newPswdConfirm=t.target.value)}}}),s("span",{staticClass:"error-field",class:[e.newPswdConfirmErrorMsg.length>0?"visible":"hidden"]},[e._v(e._s(e.newPswdConfirmErrorMsg))])])]),s("tr",[s("td",{staticStyle:{"padding-top":"10px"},attrs:{colspan:"2"}},[s("button",{staticClass:"button red large",on:{click:function(t){return e.updatePswd()}}},[e._v("Modifier le mot de passe")])])])])])])]),s("div",{staticClass:"col-5"},[s("h2",[e._v("Statistiques")]),s("div",{staticClass:"white-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col user-stats"},[s("h3",[e._v("Wake-words enregistrés")]),s("div",{staticClass:"stats-container"},[s("span",{staticClass:"icon talk"}),s("span",{staticClass:"number talk"},[e._v(e._s(e.userInfos.nbRecord))])]),s("a",{staticClass:"button red",attrs:{href:"/interface/record"}},[e._v("S'enregistrer")])]),s("div",{staticClass:"col user-stats"},[s("h3",[e._v("Wake-words écoutés")]),s("div",{staticClass:"stats-container"},[s("span",{staticClass:"icon listen"}),s("span",{staticClass:"number listen"},[e._v(e._s(e.userInfos.nbListen))])]),s("a",{staticClass:"button green",attrs:{href:"/interface/listen"}},[e._v("Écouter")])])])])])])])])])},de=[],ue={data:function(){return{userEmail:"",userEmailValid:!1,userEmailErrorMsg:"",lastNameValid:!1,lastNameErrorMsg:"",firstNameValid:!1,firstNameErrorMsg:"",currentPswd:"",currentPswdValid:!1,currentPswdErrorMsg:"",newPswd:"",newPswdValid:!1,newPswdErrorMsg:"",newPswdConfirm:"",newPswdConfirmValid:!1,newPswdConfirmErrorMsg:""}},computed:{userInfos:function(){return this.userEmail=this.$store.state.userInfos.email,this.$store.state.userInfos}},methods:{setMicrophone:function(e){this.userInfos.deviceType=e},validateEmail:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},validateNames:function(e){return/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/.test(e)},checkProfil:function(){var e=!0;return this.validateEmail(this.userEmail)?(this.userEmailValid="valid",this.userEmailErrorMsg=""):(e=!1,0===this.userInfos.email.length?(this.userEmailValid="error",this.userEmailErrorMsg="Veuillez renseigner une adresse email"):(this.userEmailValid="error",this.userEmailErrorMsg="Le format de l'adresse email est invalide")),this.validateNames(this.userInfos.lastName)||0===this.userInfos.lastName.length?(this.lastNameValid="valid",this.lastNameErrorMsg=""):(e=!1,this.lastNameValid="error",this.lastNameErrorMsg="Veuillez saisir un Nom valide"),this.validateNames(this.userInfos.firstName)||0===this.userInfos.firstName.length?(this.firstNameValid="valid",this.firstNameErrorMsg=""):(e=!1,this.firstNameValid="error",this.firstNameErrorMsg="Veuillez saisir un Prénom valide"),e},updateProfil:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var t,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.checkProfil(),!t){e.next=10;break}return s=this.userInfos,s.email=this.userEmail,e.next=6,c()("".concat("http://localhost:3003","/api/updateUser"),{method:"post",data:s});case 6:a=e.sent,"success"===a.data.status&&(this.userEmailValid=!1,this.lastNameValid=!1,this.firstNameValid=!1,be.$emit("notify_app",{status:"success",msg:"Vos informations ont été mises à jour",redirect:!1}),this.$store.dispatch("getUserInfos",this.userInfos.emailHash)),e.next=11;break;case 10:return e.abrupt("return");case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),checkPswd:function(){var e=!0;return 0===this.currentPswd.length?(e=!1,this.currentPswdValid="error",this.currentPswdErrorMsg="Veuillez saisir votre mot de passe actuel"):(this.currentPswdValid="valid",this.currentPswdErrorMsg=""),0===this.newPswd.length?(e=!1,this.newPswdValid="error",this.newPswdErrorMsg="Veuillez saisir un nouveau mot de passe"):this.newPswd===this.currentPswd?(e=!1,this.newPswdValid="error",this.newPswdErrorMsg="Le nouveau mot de passe doit être différent de l'actuel"):this.newPswd.length<8?(e=!1,this.newPswdValid="error",this.newPswdErrorMsg="Votre mot de passe doit contenir au moins 8 caractères"):(this.newPswdValid="valid",this.newPswdErrorMsg=""),0===this.newPswdConfirm.length?(e=!1,this.newPswdConfirmValid="error",this.newPswdConfirmErrorMsg="Veuillez confirmer votre nouveau mot de passe"):this.newPswdConfirm!=this.newPswd?(e=!1,this.newPswdConfirmValid="error",this.newPswdConfirmErrorMsg="Les mots de passe saisis ne correspondent pas"):(this.newPswdConfirmValid="valid",this.newPswdConfirmErrorMsg=""),e},updatePswd:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var t,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.checkPswd(),!t){e.next=9;break}return s={currentPswd:this.currentPswd,newPswd:this.newPswd,emailHash:this.userInfos.emailHash},e.next=5,c()("".concat("http://localhost:3003","/api/updateUserPswd"),{method:"post",data:s});case 5:a=e.sent,"success"===a.data.status?(be.$emit("notify_app",{status:"success",msg:"Votre mot de passe a été modifié",redirect:!1}),this.$store.dispatch("getUserInfos",this.userInfos.emailHash)):"error"===a.data.status&&(0===a.data.code?(this.currentPswdValid="error",this.currentPswdErrorMsg="Le mot de passe saisi est invalide"):be.$emit("notify_app",{status:a.status,msg:a.data.msg,redirect:!1})),e.next=10;break;case 9:return e.abrupt("return");case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},me=ue,he=Object(m["a"])(me,ce,de,!1,null,null,null),fe=he.exports;a["a"].use(M["a"]);var pe=new M["a"]({mode:"history",base:"/assets/",routes:[{path:"/",name:"home",component:F},{path:"/interface/account",name:"Compte utilisateur",component:fe},{path:"/interface/record",name:"Compte utilisateur",component:le},{path:"/interface/listen",name:"Compte utilisateur",component:Z}]}),ve=s("2f62");a["a"].use(ve["a"]);var ge=new ve["a"].Store({strict:!1,state:{userInfos:"",scenarios:"",audios:""},mutations:{SET_USER:function(e,t){e.userInfos={email:t.email,gender:t.gender,deviceType:t.deviceType,firstName:t.firstName,lastName:t.lastName,ageRange:t.ageRange,nbListen:t.nbListen,nbRecord:t.nbRecord,anonymous:t.anonymous,emailHash:t.emailHash,listenList:t.listenList,recordList:t.recordList}},SET_SCENARIOS:function(e,t){e.scenarios=t},SET_AUDIOS:function(e,t){e.audios=t}},actions:{getUserInfos:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t,s){var a,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,i=t.state,e.prev=1,e.next=4,c()("".concat("http://localhost:3003","/api/getUserInfos"),{method:"post",data:{hash:s}});case 4:return r=e.sent,a("SET_USER",r.data.user[0]),e.abrupt("return",i.userInfos);case 9:e.prev=9,e.t0=e["catch"](1),console.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}));function t(t,s){return e.apply(this,arguments)}return t}(),getScenarios:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t){var s,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,a=t.state,e.prev=1,e.next=4,c()("".concat("http://localhost:3003","/api/scenarios"),{method:"get"});case 4:return i=e.sent,s("SET_SCENARIOS",i.data.scenarios),e.abrupt("return",a.scenarios);case 9:e.prev=9,e.t0=e["catch"](1),console.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}));function t(t){return e.apply(this,arguments)}return t}(),getAudios:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t,s){var a,i,r,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,i=t.state,e.prev=1,e.next=4,c()("".concat("http://localhost:3003","/api/getAudios"),{method:"get"});case 4:return r=e.sent,n=r.data.audios,o=[],n.map(function(e){e.author!==s&&e.userVoted&&e.userVoted.indexOf(s)<0&&o.push(e)}),a("SET_AUDIOS",o),e.abrupt("return",i.audios);case 12:e.prev=12,e.t0=e["catch"](1),console.error(e.t0);case 15:case"end":return e.stop()}},e,null,[[1,12]])}));function t(t,s){return e.apply(this,arguments)}return t}()},getters:{USER_AUDIOS:function(e){e.audios;for(var t in lintos)if("null"!==lintos[t].associatedRoom){for(var s in rooms)rooms[s]._id&&rooms[s].technicalId===lintos[t].associatedRoom?lintos[t].roomId=rooms[s]._id:rooms[s]._id||rooms[s].technicalId!==lintos[t].associatedRoom||(lintos[t].roomId=rooms[s].id);associatedLintos.push(lintos[t])}return associatedLintos}}});s.d(t,"bus",function(){return be}),a["a"].config.productionTip=!1;var be=new a["a"];new a["a"]({router:pe,store:ge,render:function(e){return e(P)}}).$mount("#app")}});
//# sourceMappingURL=index.04b4d28e.js.map